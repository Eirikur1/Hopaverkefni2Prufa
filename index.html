<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Venuu - Discover Amazing Events</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/DrawSVGPlugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollToPlugin.min.js"></script>
    <script src="https://unpkg.com/in-view@0.6.1/dist/in-view.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @font-face {
            font-family: 'RubikMonoOne';
            src: url('Fonts/RubikMonoOne-Regular.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#340824',
                        'accent': '#E55050',
                        'background': '#fefaee',
                        'surface': 'rgba(254, 250, 238, 0.8)',
                        'surface-hover': 'rgba(229, 80, 80, 0.05)',
                    },
                    fontFamily: {
                        'sans': ['Inter', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.6s ease-out',
                        'bounce-in': 'bounceIn 0.8s ease-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        bounceIn: {
                            '0%': { transform: 'scale(0.3)', opacity: '0' },
                            '50%': { transform: 'scale(1.05)' },
                            '70%': { transform: 'scale(0.9)' },
                            '100%': { transform: 'scale(1)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* Essential Custom Styles Only */
        html {
            scroll-behavior: smooth;
        }

        /* Text Draw Effect Styles */
        .text-draw {
            color: #FF340A;
            text-decoration: none;
            font-size: 14px;
            font-weight: 400;
            letter-spacing: 0.01em;
            transition: color 0.2s ease;
            position: relative;
        }

        .text-draw:hover {
            color: #FF340A;
        }

        .text-draw__p {
            margin-bottom: 0;
            font-size: 1em;
            font-weight: 400;
            line-height: 1.1;
        }

        .text-draw__box {
            color: #1e40af;
            width: 100%;
            height: 0.625em;
            position: relative;
        }

        .text-draw__box-svg {
            width: 100%;
            height: 100%;
            position: absolute;
            overflow: visible !important;
        }

        /* Hero Text Draw Effect */
        .text-draw-hero {
            color: #FF340A;
            text-decoration: none;
            font-family: 'RubikMonoOne', monospace;
            font-size: clamp(56px, 9vw, 140px);
            font-weight: normal;
            letter-spacing: -0.04em;
            transition: color 0.2s ease;
            position: relative;
            display: inline-block;
        }

        .text-draw-hero:hover {
            color: #FF340A;
        }

        .text-draw-hero .text-draw__p {
            margin-bottom: 0;
            font-size: 1em;
            font-weight: 300;
            line-height: 0.9;
        }

        .text-draw-hero .text-draw__box {
            color: #1e40af;
            width: 100%;
            height: 0.8em;
            position: relative;
        }


        /* Text Animation Styles */
        .splitted-word {
            overflow: hidden;
            display: inline-block;
            line-height: 1.1;
            white-space: nowrap;
        }
        
        .splitted-letter {
            display: inline-block;
            transform: translateY(100%);
            position: relative;
            z-index: 1;
        }
        
        .splitted-letter:before { 
            content: '';
            position: absolute;
            z-index: -1;
            background: #1e40af;
            height: 7px;
            width: 0%;
            top: 90%;
            left: 0;
            opacity: 0;
            transition: all .4s ease-in-out .35s;
        }
        
        .splitted-letter.viewed:before {
            opacity: 1;
            width: 100%;
        }

        /* Enhanced Text Animation Styles */
        .tit .splitted-word {
            overflow: hidden;
            display: inline-block;
            line-height: 1.1;
            white-space: nowrap;
        }
        
        .tit .splitted-letter {
            display: inline-block;
            transform: translateY(100%);
            position: relative;
            z-index: 1;
        }
        
        .tit .splitted-letter:before { 
            content: '';
            position: absolute;
            z-index: -1;
            background: #1e40af;
            height: 7px;
            width: 0%;
            top: 90%;
            left: 0;
            opacity: 0;
            transition: all .4s ease-in-out .35s;
        }
        
        .tit .splitted-letter.viewed:before {
            opacity: 1;
            width: 100%;
        }

        /* Text Animation without underline */
        .tit-no-underline .splitted-word {
            overflow: hidden;
            display: inline-block;
            line-height: 1.1;
            white-space: nowrap;
        }
        
        .tit-no-underline .splitted-letter {
            display: inline-block;
            transform: translateY(100%);
            position: relative;
            z-index: 1;
        }
        
        .tit-no-underline .splitted-letter:before { 
            display: none; /* Hide the underline effect */
        }

        /* Carousel Navigation Styles */
        .nav {
            text-align: center;
            margin: 0;
            padding: 0;
            list-style: none;
            display: flex;
            gap: 1rem;
            justify-content: center;
        }
        
        .nav__item {
            display: inline-block;
            cursor: pointer;
            width: 2em;
            line-height: 2em;
            position: relative;
            z-index: 1;
            user-select: none;
            color: rgba(52, 8, 36, 0.7);
            font-weight: bold;
            transition: color 0.2s;
        }
        
        .nav__item svg {
            position: absolute;
            z-index: -1;
            top: 0;
            left: 0;
        }
        
        .nav__item svg circle {
            fill: none;
            stroke: #E55050;
            stroke-width: 1;
            stroke-linecap: round;
            stroke-dasharray: 39 39;
            stroke-dashoffset: 39;
            transition: stroke-dashoffset 0.5s;
        }
        
        .nav__item--active span {
            color: #E55050;
            transition: color 0.2s;
        }
        
        .nav__item--active svg circle {
            stroke-dashoffset: 0;
        }

        /* Fade-in text animation */
        .fade-in-text {
            opacity: 0;
            animation: fadeInText 2s ease-in-out 0.5s forwards;
        }

        @keyframes fadeInText {
            0% {
                opacity: 0;
                transform: translateY(20px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Events Grid Masonry Styles */
        .events-grid {
            max-width: 1100px;
            margin: 0 auto;
            display: grid;
            grid-gap: 50px;
            grid-template-columns: repeat(6, 1fr);
            justify-content: center;
            align-content: end;
            grid-auto-flow: dense;
            padding: 0 20px;
        }

        .event-item {
            position: relative;
            z-index: 1;
            align-self: start;
            grid-column: span 2;
            grid-row: span 2;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            gap: 0;
        }

        .event-item:hover {
            transform: translateY(-8px) scale(1.02);
        }

        /* Large items - every 6th item starting from 1st */
        .event-item:nth-child(6n+1) {
            grid-column: span 4;
            grid-row: span 4;
        }

        /* Medium items - every 8th item starting from 4th and 5th */
        .event-item:nth-child(8n+4),
        .event-item:nth-child(8n+5) {
            grid-column: span 3;
            grid-row: span 3;
        }

        .event-img {
            position: relative;
            z-index: 1;
            width: 100%;
            margin-bottom: 8px;
        }


        .event-img img {
            width: 100%;
            height: auto;
            display: block;
            transition: all 0.4s ease;
            filter: brightness(1) contrast(1.1);
        }

        .event-item:hover .event-img img {
            transform: scale(1.05);
            filter: brightness(1.1) contrast(1.2);
        }

        .event-caption {
            position: relative;
            z-index: 2;
            width: 100%;
            padding: 20px 0 0 0;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        .event-caption .event-title {
            font-size: 18px;
            color: #340824;
            font-weight: 700;
            margin-bottom: 8px;
            line-height: 1.2;
            letter-spacing: -0.02em;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .event-caption .event-location {
            font-size: 14px;
            color: #6b7280;
            margin-bottom: 6px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .event-caption .event-location::before {
            content: '';
            width: 16px;
            height: 16px;
            background-image: url('icons/distance_24dp_E3E3E3_FILL0_wght400_GRAD0_opsz24.svg');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            display: inline-block;
            flex-shrink: 0;
            filter: brightness(0) saturate(100%);
        }

        .event-caption .event-date {
            font-size: 13px;
            color: #9ca3af;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .event-caption .event-date::before {
            content: '';
            width: 16px;
            height: 16px;
            background-image: url('icons/calendar_month_24dp_E3E3E3_FILL0_wght400_GRAD0_opsz24.svg');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            display: inline-block;
            flex-shrink: 0;
        }


        /* Responsive adjustments */
        @media (max-width: 768px) {
            .events-grid {
                grid-template-columns: repeat(2, 1fr);
                grid-gap: 20px;
                padding: 0 15px;
            }
            
            .event-item {
                grid-column: span 1;
                grid-row: span 1;
            }
            
            .event-item:nth-child(6n+1),
            .event-item:nth-child(8n+4),
            .event-item:nth-child(8n+5) {
                grid-column: span 1;
                grid-row: span 1;
            }

            .event-img {
                margin-bottom: 6px;
            }

            .event-caption {
                padding: 16px 0 0 0;
            }

            .event-caption .event-title {
                font-size: 16px;
            }

            .event-caption .event-location {
                font-size: 13px;
            }

            .event-caption .event-date {
                font-size: 12px;
            }
        }

        @media (max-width: 480px) {
            .events-grid {
                grid-template-columns: 1fr;
                grid-gap: 15px;
                padding: 0 10px;
            }

            .event-img {
                margin-bottom: 4px;
            }

            .event-caption {
                padding: 14px 0 0 0;
            }

            .event-caption .event-title {
                font-size: 15px;
            }

            .event-caption .event-location {
                font-size: 12px;
            }

            .event-caption .event-date {
                font-size: 11px;
            }
        }

        /* Search Bar Styles */
        .search-container {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .search-bar {
            position: relative;
            width: 100%;
            max-width: 600px;
        }

        .search-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(254, 250, 238, 0.98);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 52, 10, 0.1);
            border-top: none;
            border-radius: 0 0 25px 25px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
            box-shadow: 0 12px 32px rgba(255, 52, 10, 0.15);
            margin-top: 2px;
        }

        .search-dropdown.show {
            display: block;
        }

        .search-suggestion {
            padding: 14px 20px;
            cursor: pointer;
            border-bottom: 1px solid rgba(255, 52, 10, 0.08);
            transition: all 0.3s ease;
            position: relative;
        }

        .search-suggestion:hover {
            background-color: rgba(255, 52, 10, 0.08);
            transform: translateX(4px);
        }

        .search-suggestion:last-child {
            border-bottom: none;
        }

        .suggestion-title {
            font-weight: 500;
            color: #FF340A;
            margin-bottom: 4px;
            font-size: 15px;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        .suggestion-details {
            font-size: 12px;
            color: rgba(52, 8, 36, 0.7);
            font-weight: 400;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        .no-results {
            padding: 20px;
            text-align: center;
            color: rgba(52, 8, 36, 0.6);
            font-style: italic;
            font-size: 14px;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        .search-input {
            width: 100%;
            padding: 12px 16px 12px 40px;
            border: 1px solid rgba(52, 8, 36, 0.1);
            border-radius: 25px;
            font-size: 14px;
            background-color: transparent;
            color: #340824;
            transition: all 0.3s ease;
            outline: none;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-weight: 400;
        }

        .search-input:focus {
            border-color: rgba(52, 8, 36, 0.2);
            background-color: rgba(254, 250, 238, 0.3);
            box-shadow: 0 0 0 2px rgba(52, 8, 36, 0.05);
        }

        .search-input::placeholder {
            color: rgba(52, 8, 36, 0.5);
            font-weight: 300;
        }

        .search-btn {
            position: absolute;
            left: 8px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            border: none;
            background: transparent;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .search-btn:hover {
            transform: translateY(-50%) scale(1.1);
        }

        .search-btn svg {
            width: 16px;
            height: 16px;
            fill: rgba(52, 8, 36, 0.6);
        }

        /* Recommended Events Carousel Styles */
        .recommended-carousel-container {
            position: relative;
            width: 100%;
            touch-action: pan-y pinch-zoom;
            -webkit-overflow-scrolling: touch;
        }

        .recommended-carousel-track {
            display: flex;
            gap: 24px;
            padding: 0 4px;
        }

        .recommended-event-card {
            flex: 0 0 320px;
            height: 400px;
            position: relative;
            z-index: 1;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            gap: 0;
        }

        .recommended-event-card:hover {
            transform: translateY(-8px) scale(1.02);
        }

        .recommended-event-image {
            position: relative;
            z-index: 1;
            width: 100%;
            margin-bottom: 8px;
        }

        .recommended-event-image img {
            width: 100%;
            height: 240px;
            object-fit: cover;
            display: block;
            transition: all 0.4s ease;
            filter: brightness(1) contrast(1.1);
        }

        .recommended-event-card:hover .recommended-event-image img {
            transform: scale(1.05);
            filter: brightness(1.1) contrast(1.2);
        }

        .recommended-event-content {
            position: relative;
            z-index: 2;
            width: 100%;
            padding: 20px 0 0 0;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        .recommended-event-title {
            font-size: 18px;
            color: #340824;
            font-weight: 700;
            margin-bottom: 8px;
            line-height: 1.2;
            letter-spacing: -0.02em;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .recommended-event-location {
            font-size: 14px;
            color: #6b7280;
            margin-bottom: 6px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .recommended-event-location::before {
            content: '';
            width: 16px;
            height: 16px;
            background-image: url('icons/distance_24dp_E3E3E3_FILL0_wght400_GRAD0_opsz24.svg');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            display: inline-block;
            flex-shrink: 0;
            filter: brightness(0) saturate(100%);
        }

        .recommended-event-date {
            font-size: 13px;
            color: #9ca3af;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .recommended-event-date::before {
            content: '';
            width: 16px;
            height: 16px;
            background-image: url('icons/calendar_month_24dp_E3E3E3_FILL0_wght400_GRAD0_opsz24.svg');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            display: inline-block;
            flex-shrink: 0;
        }

        .carousel-nav {
            opacity: 1;
            transition: all 0.3s ease;
        }

        .carousel-nav:disabled {
            opacity: 0.2;
            cursor: not-allowed;
        }

        .carousel-nav:disabled svg {
            color: rgba(156, 163, 175, 0.3) !important;
        }

        /* Arrow Animation */
        .arrow-animate {
            transition: transform 0.3s ease;
        }

        .arrow-animate:hover {
            transform: translateX(4px);
        }

        @keyframes arrowPulse {
            0%, 100% {
                transform: translateX(0);
            }
            50% {
                transform: translateX(2px);
            }
        }

        .arrow-animate {
            animation: arrowPulse 2s ease-in-out infinite;
        }

        .recommended-carousel-container {
            user-select: none;
        }

        .recommended-carousel-container.dragging {
            cursor: grabbing;
        }

        .recommended-carousel-container.dragging .recommended-carousel-track {
            transition: none;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .recommended-event-card {
                flex: 0 0 280px;
                height: 360px;
            }
            
            .recommended-event-image img {
                height: 200px;
            }
            
            .recommended-event-content {
                padding: 16px 0 0 0;
            }
            
            .recommended-event-title {
                font-size: 16px;
            }
            
            .carousel-nav {
                opacity: 1;
                width: 32px;
                height: 32px;
            }
        }

    </style>
</head>
<body class="bg-background text-primary font-sans text-base leading-relaxed m-0 p-0 min-h-full">
    <!-- Navigation -->
    <nav class="fixed top-0 left-0 right-0 bg-background/95 backdrop-blur-xl border-b border-primary/10 z-50 py-2 md:py-3">
        <div class="max-w-7xl mx-auto px-4 md:px-10 flex justify-between items-center">
            <a href="index.html" id="logo-link" class="no-underline">
                <img src="Video/Negative-mask-effect1-ezgif.com-crop (1).gif" alt="Venuu" class="h-10 md:h-12 w-auto">
            </a>
            
            <!-- Desktop Navigation -->
            <ul class="hidden md:flex list-none m-0 p-0 gap-6 lg:gap-10">
                <li><a data-draw-line="" href="events.html" class="text-draw">
                    <p class="text-draw__p">Events</p>
                    <div data-draw-line-box="" class="text-draw__box"></div>
                </a></li>
                <li><a data-draw-line="" href="#about" class="text-draw">
                    <p class="text-draw__p">Create Event</p>
                    <div data-draw-line-box="" class="text-draw__box"></div>
                </a></li>
                <li><a data-draw-line="" href="#contact" class="text-draw">
                    <p class="text-draw__p">Log In</p>
                    <div data-draw-line-box="" class="text-draw__box"></div>
                </a></li>
                <li><a data-draw-line="" href="#" class="text-draw">
                    <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="#FF340A">
                        <path d="M480-340q63 0 112-39t63-101h-83q-12 27-37 43.5T480-420q-30 0-55-16.5T388-480h-83q14 62 63 101t112 39ZM370-540q21 0 35.5-14.5T420-590q0-21-14.5-35.5T370-640q-21 0-35.5 14.5T320-590q0 21 14.5 35.5T370-540Zm220 0q21 0 35.5-14.5T640-590q0-21-14.5-35.5T590-640q-21 0-35.5 14.5T540-590q0 21 14.5 35.5T590-540ZM480-120l-58-50q-101-88-167-152T150-437q-39-51-54.5-94T80-620q0-94 63-157t157-63q52 0 99 22t81 62q34-40 81-62t99-22q94 0 157 63t63 157q0 46-15.5 89T810-437q-39 51-105 115T538-170l-58 50Zm0-108q96-83 158-141t98-102.5q36-44.5 50-79t14-69.5q0-60-40-100t-100-40q-47 0-87 26.5T518-666h-76q-15-41-55-67.5T300-760q-60 0-100 40t-40 100q0 35 14 69.5t50 79Q260-427 322-369t158 141Zm0-266Z"/>
                    </svg>
                    <div data-draw-line-box="" class="text-draw__box"></div>
                </a></li>
            </ul>

            <!-- Mobile Menu Button -->
            <button id="mobile-menu-btn" class="md:hidden p-2 text-primary hover:text-accent transition-colors duration-200">
                <i class="fas fa-bars text-xl"></i>
            </button>
        </div>

        <!-- Mobile Navigation Menu -->
        <div id="mobile-menu" class="md:hidden bg-background/98 backdrop-blur-xl border-t border-primary/10 hidden">
            <div class="px-4 py-4 space-y-4">
                <a data-draw-line="" href="events.html" class="block text-draw py-2">
                    <p class="text-draw__p">Events</p>
                    <div data-draw-line-box="" class="text-draw__box"></div>
                </a>
                <a data-draw-line="" href="#about" class="block text-draw py-2">
                    <p class="text-draw__p">About</p>
                    <div data-draw-line-box="" class="text-draw__box"></div>
                </a>
                <a data-draw-line="" href="#contact" class="block text-draw py-2">
                    <p class="text-draw__p">Contact</p>
                    <div data-draw-line-box="" class="text-draw__box"></div>
                </a>
                <a data-draw-line="" href="#" class="block text-draw py-2">
                    <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="#FF340A">
                        <path d="M480-340q63 0 112-39t63-101h-83q-12 27-37 43.5T480-420q-30 0-55-16.5T388-480h-83q14 62 63 101t112 39ZM370-540q21 0 35.5-14.5T420-590q0-21-14.5-35.5T370-640q-21 0-35.5 14.5T320-590q0 21 14.5 35.5T370-540Zm220 0q21 0 35.5-14.5T640-590q0-21-14.5-35.5T590-640q-21 0-35.5 14.5T540-590q0 21 14.5 35.5T590-540ZM480-120l-58-50q-101-88-167-152T150-437q-39-51-54.5-94T80-620q0-94 63-157t157-63q52 0 99 22t81 62q34-40 81-62t99-22q94 0 157 63t63 157q0 46-15.5 89T810-437q-39 51-105 115T538-170l-58 50Zm0-108q96-83 158-141t98-102.5q36-44.5 50-79t14-69.5q0-60-40-100t-100-40q-47 0-87 26.5T518-666h-76q-15-41-55-67.5T300-760q-60 0-100 40t-40 100q0 35 14 69.5t50 79Q260-427 322-369t158 141Zm0-266Z"/>
                    </svg>
                    <div data-draw-line-box="" class="text-draw__box"></div>
                </a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="pt-24 md:pt-36 pb-8 md:pb-12 text-center max-w-4xl mx-auto px-4 md:px-10 relative bg-background">
        <h1 class="mb-2 md:mb-3 leading-tight"><a data-draw-line="" href="#" class="text-draw-hero">
            <p class="text-draw__p">Discover Events</p>
            <div data-draw-line-box="" class="text-draw__box"></div>
        </a></h1>
    </section>

    <!-- Search Bar Section -->
    <section class="py-2 md:py-3 bg-background">
        <div class="max-w-4xl mx-auto px-4 md:px-10">
            <!-- Search and Filter Bar -->
            <div class="search-container">
                <div class="search-bar">
                    <input type="text" class="search-input" placeholder="Search for events, locations, or categories..." id="searchInput">
                    <button class="search-btn" id="searchBtn">
                        <svg viewBox="0 0 24 24">
                            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                        </svg>
                    </button>
                    <div class="search-dropdown" id="searchDropdown">
                        <!-- Search suggestions will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Recommended Events Section -->
    <section class="py-12 md:py-16 bg-background">
        <div class="max-w-full mx-auto px-2 md:px-4">
            <div class="mb-8 md:mb-12 flex justify-between items-end">
                <div>
                    <p class="text-sm md:text-base text-draw font-bold flex items-center">
                        Reccomended events for you
                        <svg class="w-6 h-6 ml-3 arrow-animate" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="m560-240-56-58 142-142H160v-80h486L504-662l56-58 240 240-240 240Z"/>
                        </svg>
                    </p>
                </div>
                
                <!-- Navigation Arrows -->
                <div class="flex gap-1">
                    <button class="carousel-nav carousel-nav-prev bg-transparent border-none rounded-full w-8 h-8 flex items-center justify-center hover:bg-red-50/50 transition-all duration-300" id="prevBtn">
                        <svg class="w-5 h-5" style="color: #FF340A;" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="M640-80 240-480l400-400 71 71-329 329 329 329-71 71Z"/>
                        </svg>
                    </button>
                    <button class="carousel-nav carousel-nav-next bg-transparent border-none rounded-full w-8 h-8 flex items-center justify-center hover:bg-red-50/50 transition-all duration-300" id="nextBtn">
                        <svg class="w-5 h-5" style="color: #FF340A;" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="m321-80-71-71 329-329-329-329 71-71 400 400L321-80Z"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="relative">
                <!-- Carousel Container -->
                <div class="recommended-carousel-container overflow-hidden cursor-grab active:cursor-grabbing" id="carouselContainer">
                    <div class="recommended-carousel-track flex transition-transform duration-300 ease-out" id="recommendedCarousel">
                        <!-- Recommended events will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Family Events Section -->
    <section class="py-12 md:py-16 bg-background">
        <div class="max-w-full mx-auto px-2 md:px-4">
            <div class="mb-8 md:mb-12 flex justify-between items-end">
                <div>
                    <h2 class="text-draw-hero text-2xl md:text-3xl lg:text-4xl mb-4 font-light tracking-tight">Family Events</h2>
                    <p class="text-sm md:text-base text-draw font-bold flex items-center">
                        Perfect for families with children
                        <svg class="w-6 h-6 ml-3 arrow-animate" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="m560-240-56-58 142-142H160v-80h486L504-662l56-58 240 240-240 240Z"/>
                        </svg>
                    </p>
                </div>
                
                <!-- Navigation Arrows -->
                <div class="flex gap-1">
                    <button class="carousel-nav carousel-nav-prev bg-transparent border-none rounded-full w-8 h-8 flex items-center justify-center hover:bg-red-50/50 transition-all duration-300" id="familyPrevBtn">
                        <svg class="w-5 h-5" style="color: #FF340A;" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="M640-80 240-480l400-400 71 71-329 329 329 329-71 71Z"/>
                        </svg>
                    </button>
                    <button class="carousel-nav carousel-nav-next bg-transparent border-none rounded-full w-8 h-8 flex items-center justify-center hover:bg-red-50/50 transition-all duration-300" id="familyNextBtn">
                        <svg class="w-5 h-5" style="color: #FF340A;" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="m321-80-71-71 329-329-329-329 71-71 400 400L321-80Z"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="relative">
                <!-- Carousel Container -->
                <div class="recommended-carousel-container overflow-hidden cursor-grab active:cursor-grabbing" id="familyCarouselContainer">
                    <div class="recommended-carousel-track flex transition-transform duration-300 ease-out" id="familyCarousel">
                        <!-- Family events will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Free Events Section -->
    <section class="py-12 md:py-16 bg-background">
        <div class="max-w-full mx-auto px-2 md:px-4">
            <div class="mb-8 md:mb-12 flex justify-between items-end">
                <div>
                    <h2 class="text-draw-hero text-2xl md:text-3xl lg:text-4xl mb-4 font-light tracking-tight">Free Events</h2>
                    <p class="text-sm md:text-base text-draw font-bold flex items-center">
                        No cost, maximum fun
                        <svg class="w-6 h-6 ml-3 arrow-animate" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="m560-240-56-58 142-142H160v-80h486L504-662l56-58 240 240-240 240Z"/>
                        </svg>
                    </p>
                </div>
                
                <!-- Navigation Arrows -->
                <div class="flex gap-1">
                    <button class="carousel-nav carousel-nav-prev bg-transparent border-none rounded-full w-8 h-8 flex items-center justify-center hover:bg-red-50/50 transition-all duration-300" id="freePrevBtn">
                        <svg class="w-5 h-5" style="color: #FF340A;" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="M640-80 240-480l400-400 71 71-329 329 329 329-71 71Z"/>
                        </svg>
                    </button>
                    <button class="carousel-nav carousel-nav-next bg-transparent border-none rounded-full w-8 h-8 flex items-center justify-center hover:bg-red-50/50 transition-all duration-300" id="freeNextBtn">
                        <svg class="w-5 h-5" style="color: #FF340A;" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="m321-80-71-71 329-329-329-329 71-71 400 400L321-80Z"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="relative">
                <!-- Carousel Container -->
                <div class="recommended-carousel-container overflow-hidden cursor-grab active:cursor-grabbing" id="freeCarouselContainer">
                    <div class="recommended-carousel-track flex transition-transform duration-300 ease-out" id="freeCarousel">
                        <!-- Free events will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Music Events Section -->
    <section class="py-12 md:py-16 bg-background">
        <div class="max-w-full mx-auto px-2 md:px-4">
            <div class="mb-8 md:mb-12 flex justify-between items-end">
                <div>
                    <h2 class="text-draw-hero text-2xl md:text-3xl lg:text-4xl mb-4 font-light tracking-tight">Music Events</h2>
                    <p class="text-sm md:text-base text-draw font-bold flex items-center">
                        Live music and concerts
                        <svg class="w-6 h-6 ml-3 arrow-animate" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="m560-240-56-58 142-142H160v-80h486L504-662l56-58 240 240-240 240Z"/>
                        </svg>
                    </p>
                </div>
                
                <!-- Navigation Arrows -->
                <div class="flex gap-1">
                    <button class="carousel-nav carousel-nav-prev bg-transparent border-none rounded-full w-8 h-8 flex items-center justify-center hover:bg-red-50/50 transition-all duration-300" id="musicPrevBtn">
                        <svg class="w-5 h-5" style="color: #FF340A;" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="M640-80 240-480l400-400 71 71-329 329 329 329-71 71Z"/>
                        </svg>
                    </button>
                    <button class="carousel-nav carousel-nav-next bg-transparent border-none rounded-full w-8 h-8 flex items-center justify-center hover:bg-red-50/50 transition-all duration-300" id="musicNextBtn">
                        <svg class="w-5 h-5" style="color: #FF340A;" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="m321-80-71-71 329-329-329-329 71-71 400 400L321-80Z"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="relative">
                <!-- Carousel Container -->
                <div class="recommended-carousel-container overflow-hidden cursor-grab active:cursor-grabbing" id="musicCarouselContainer">
                    <div class="recommended-carousel-track flex transition-transform duration-300 ease-out" id="musicCarousel">
                        <!-- Music events will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Art & Culture Events Section -->
    <section class="py-12 md:py-16 bg-background">
        <div class="max-w-full mx-auto px-2 md:px-4">
            <div class="mb-8 md:mb-12 flex justify-between items-end">
                <div>
                    <h2 class="text-draw-hero text-2xl md:text-3xl lg:text-4xl mb-4 font-light tracking-tight">Art & Culture</h2>
                    <p class="text-sm md:text-base text-draw font-bold flex items-center">
                        Exhibitions and cultural experiences
                        <svg class="w-6 h-6 ml-3 arrow-animate" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="m560-240-56-58 142-142H160v-80h486L504-662l56-58 240 240-240 240Z"/>
                        </svg>
                    </p>
                </div>
                
                <!-- Navigation Arrows -->
                <div class="flex gap-1">
                    <button class="carousel-nav carousel-nav-prev bg-transparent border-none rounded-full w-8 h-8 flex items-center justify-center hover:bg-red-50/50 transition-all duration-300" id="artPrevBtn">
                        <svg class="w-5 h-5" style="color: #FF340A;" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="M640-80 240-480l400-400 71 71-329 329 329 329-71 71Z"/>
                        </svg>
                    </button>
                    <button class="carousel-nav carousel-nav-next bg-transparent border-none rounded-full w-8 h-8 flex items-center justify-center hover:bg-red-50/50 transition-all duration-300" id="artNextBtn">
                        <svg class="w-5 h-5" style="color: #FF340A;" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="m321-80-71-71 329-329-329-329 71-71 400 400L321-80Z"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="relative">
                <!-- Carousel Container -->
                <div class="recommended-carousel-container overflow-hidden cursor-grab active:cursor-grabbing" id="artCarouselContainer">
                    <div class="recommended-carousel-track flex transition-transform duration-300 ease-out" id="artCarousel">
                        <!-- Art & Culture events will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Food & Drink Events Section -->
    <section class="py-12 md:py-16 bg-background">
        <div class="max-w-full mx-auto px-2 md:px-4">
            <div class="mb-8 md:mb-12 flex justify-between items-end">
                <div>
                    <h2 class="text-draw-hero text-2xl md:text-3xl lg:text-4xl mb-4 font-light tracking-tight">Food & Drink</h2>
                    <p class="text-sm md:text-base text-draw font-bold flex items-center">
                        Culinary experiences and tastings
                        <svg class="w-6 h-6 ml-3 arrow-animate" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="m560-240-56-58 142-142H160v-80h486L504-662l56-58 240 240-240 240Z"/>
                        </svg>
                    </p>
                </div>
                
                <!-- Navigation Arrows -->
                <div class="flex gap-1">
                    <button class="carousel-nav carousel-nav-prev bg-transparent border-none rounded-full w-8 h-8 flex items-center justify-center hover:bg-red-50/50 transition-all duration-300" id="foodPrevBtn">
                        <svg class="w-5 h-5" style="color: #FF340A;" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="M640-80 240-480l400-400 71 71-329 329 329 329-71 71Z"/>
                        </svg>
                    </button>
                    <button class="carousel-nav carousel-nav-next bg-transparent border-none rounded-full w-8 h-8 flex items-center justify-center hover:bg-red-50/50 transition-all duration-300" id="foodNextBtn">
                        <svg class="w-5 h-5" style="color: #FF340A;" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="m321-80-71-71 329-329-329-329 71-71 400 400L321-80Z"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="relative">
                <!-- Carousel Container -->
                <div class="recommended-carousel-container overflow-hidden cursor-grab active:cursor-grabbing" id="foodCarouselContainer">
                    <div class="recommended-carousel-track flex transition-transform duration-300 ease-out" id="foodCarousel">
                        <!-- Food & Drink events will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sports & Fitness Events Section -->
    <section class="py-12 md:py-16 bg-background">
        <div class="max-w-full mx-auto px-2 md:px-4">
            <div class="mb-8 md:mb-12 flex justify-between items-end">
                <div>
                    <h2 class="text-draw-hero text-2xl md:text-3xl lg:text-4xl mb-4 font-light tracking-tight">Sports & Fitness</h2>
                    <p class="text-sm md:text-base text-draw font-bold flex items-center">
                        Active events and competitions
                        <svg class="w-6 h-6 ml-3 arrow-animate" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="m560-240-56-58 142-142H160v-80h486L504-662l56-58 240 240-240 240Z"/>
                        </svg>
                    </p>
                </div>
                
                <!-- Navigation Arrows -->
                <div class="flex gap-1">
                    <button class="carousel-nav carousel-nav-prev bg-transparent border-none rounded-full w-8 h-8 flex items-center justify-center hover:bg-red-50/50 transition-all duration-300" id="sportsPrevBtn">
                        <svg class="w-5 h-5" style="color: #FF340A;" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="M640-80 240-480l400-400 71 71-329 329 329 329-71 71Z"/>
                        </svg>
                    </button>
                    <button class="carousel-nav carousel-nav-next bg-transparent border-none rounded-full w-8 h-8 flex items-center justify-center hover:bg-red-50/50 transition-all duration-300" id="sportsNextBtn">
                        <svg class="w-5 h-5" style="color: #FF340A;" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="m321-80-71-71 329-329-329-329 71-71 400 400L321-80Z"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="relative">
                <!-- Carousel Container -->
                <div class="recommended-carousel-container overflow-hidden cursor-grab active:cursor-grabbing" id="sportsCarouselContainer">
                    <div class="recommended-carousel-track flex transition-transform duration-300 ease-out" id="sportsCarousel">
                        <!-- Sports & Fitness events will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Outdoor Events Section -->
    <section class="py-12 md:py-16 bg-background">
        <div class="max-w-full mx-auto px-2 md:px-4">
            <div class="mb-8 md:mb-12 flex justify-between items-end">
                <div>
                    <h2 class="text-draw-hero text-2xl md:text-3xl lg:text-4xl mb-4 font-light tracking-tight">Outdoor Events</h2>
                    <p class="text-sm md:text-base text-draw font-bold flex items-center">
                        Nature and adventure experiences
                        <svg class="w-6 h-6 ml-3 arrow-animate" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="m560-240-56-58 142-142H160v-80h486L504-662l56-58 240 240-240 240Z"/>
                        </svg>
                    </p>
                </div>
                
                <!-- Navigation Arrows -->
                <div class="flex gap-1">
                    <button class="carousel-nav carousel-nav-prev bg-transparent border-none rounded-full w-8 h-8 flex items-center justify-center hover:bg-red-50/50 transition-all duration-300" id="outdoorPrevBtn">
                        <svg class="w-5 h-5" style="color: #FF340A;" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="M640-80 240-480l400-400 71 71-329 329 329 329-71 71Z"/>
                        </svg>
                    </button>
                    <button class="carousel-nav carousel-nav-next bg-transparent border-none rounded-full w-8 h-8 flex items-center justify-center hover:bg-red-50/50 transition-all duration-300" id="outdoorNextBtn">
                        <svg class="w-5 h-5" style="color: #FF340A;" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="m321-80-71-71 329-329-329-329 71-71 400 400L321-80Z"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="relative">
                <!-- Carousel Container -->
                <div class="recommended-carousel-container overflow-hidden cursor-grab active:cursor-grabbing" id="outdoorCarouselContainer">
                    <div class="recommended-carousel-track flex transition-transform duration-300 ease-out" id="outdoorCarousel">
                        <!-- Outdoor events will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Educational Events Section -->
    <section class="py-12 md:py-16 bg-background">
        <div class="max-w-full mx-auto px-2 md:px-4">
            <div class="mb-8 md:mb-12 flex justify-between items-end">
                <div>
                    <h2 class="text-draw-hero text-2xl md:text-3xl lg:text-4xl mb-4 font-light tracking-tight">Educational</h2>
                    <p class="text-sm md:text-base text-draw font-bold flex items-center">
                        Workshops and learning experiences
                        <svg class="w-6 h-6 ml-3 arrow-animate" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="m560-240-56-58 142-142H160v-80h486L504-662l56-58 240 240-240 240Z"/>
                        </svg>
                    </p>
                </div>
                
                <!-- Navigation Arrows -->
                <div class="flex gap-1">
                    <button class="carousel-nav carousel-nav-prev bg-transparent border-none rounded-full w-8 h-8 flex items-center justify-center hover:bg-red-50/50 transition-all duration-300" id="educationPrevBtn">
                        <svg class="w-5 h-5" style="color: #FF340A;" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="M640-80 240-480l400-400 71 71-329 329 329 329-71 71Z"/>
                        </svg>
                    </button>
                    <button class="carousel-nav carousel-nav-next bg-transparent border-none rounded-full w-8 h-8 flex items-center justify-center hover:bg-red-50/50 transition-all duration-300" id="educationNextBtn">
                        <svg class="w-5 h-5" style="color: #FF340A;" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="m321-80-71-71 329-329-329-329 71-71 400 400L321-80Z"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="relative">
                <!-- Carousel Container -->
                <div class="recommended-carousel-container overflow-hidden cursor-grab active:cursor-grabbing" id="educationCarouselContainer">
                    <div class="recommended-carousel-track flex transition-transform duration-300 ease-out" id="educationCarousel">
                        <!-- Educational events will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Business & Networking Events Section -->
    <section class="py-12 md:py-16 bg-background">
        <div class="max-w-full mx-auto px-2 md:px-4">
            <div class="mb-8 md:mb-12 flex justify-between items-end">
                <div>
                    <h2 class="text-draw-hero text-2xl md:text-3xl lg:text-4xl mb-4 font-light tracking-tight">Business & Networking</h2>
                    <p class="text-sm md:text-base text-draw font-bold flex items-center">
                        Professional events and meetups
                        <svg class="w-6 h-6 ml-3 arrow-animate" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="m560-240-56-58 142-142H160v-80h486L504-662l56-58 240 240-240 240Z"/>
                        </svg>
                    </p>
                </div>
                
                <!-- Navigation Arrows -->
                <div class="flex gap-1">
                    <button class="carousel-nav carousel-nav-prev bg-transparent border-none rounded-full w-8 h-8 flex items-center justify-center hover:bg-red-50/50 transition-all duration-300" id="businessPrevBtn">
                        <svg class="w-5 h-5" style="color: #FF340A;" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="M640-80 240-480l400-400 71 71-329 329 329 329-71 71Z"/>
                        </svg>
                    </button>
                    <button class="carousel-nav carousel-nav-next bg-transparent border-none rounded-full w-8 h-8 flex items-center justify-center hover:bg-red-50/50 transition-all duration-300" id="businessNextBtn">
                        <svg class="w-5 h-5" style="color: #FF340A;" fill="currentColor" viewBox="0 -960 960 960">
                            <path d="m321-80-71-71 329-329-329-329 71-71 400 400L321-80Z"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <div class="relative">
                <!-- Carousel Container -->
                <div class="recommended-carousel-container overflow-hidden cursor-grab active:cursor-grabbing" id="businessCarouselContainer">
                    <div class="recommended-carousel-track flex transition-transform duration-300 ease-out" id="businessCarousel">
                        <!-- Business & Networking events will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section class="py-16 md:py-24 bg-background" id="about">
        <div class="text-center mb-12 md:mb-20 px-4 md:px-0">
            <h2 class="tit-no-underline text-3xl md:text-4xl lg:text-5xl mb-4 md:mb-6 text-primary font-light tracking-tight">About Venuu</h2>
        </div>

        <!-- Image Carousel -->
        <div class="max-w-6xl mx-auto px-4 md:px-10 mb-12 md:mb-20">
            <div id="about-carousel" class="relative overflow-hidden rounded-2xl shadow-2xl">
                <div class="flex transition-transform duration-500 ease-in-out" id="carousel-track">
                    <div class="w-full flex-shrink-0">
                        <img src="Images/068e9d4bef717cd1000843dc38c603ec.jpg" alt="Iceland Events" class="w-full h-48 md:h-96 object-cover">
                    </div>
                    <div class="w-full flex-shrink-0">
                        <img src="Images/1d595e6dc1b6a3d963b932eb94de79d1.jpg" alt="Cultural Events" class="w-full h-96 object-cover">
                    </div>
                    <div class="w-full flex-shrink-0">
                        <img src="Images/233986128f46951bf66a727cca1b3a18.jpg" alt="Community Events" class="w-full h-96 object-cover">
                    </div>
                    <div class="w-full flex-shrink-0">
                        <img src="Images/3bd777f8c2760cbf585251808e738698.jpg" alt="Music Events" class="w-full h-96 object-cover">
                    </div>
                    <div class="w-full flex-shrink-0">
                        <img src="Images/3f117cff666f231104f270edda727dab.jpg" alt="Art Events" class="w-full h-96 object-cover">
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Navigation -->
        <div class="flex justify-center -mt-4">
            <ul class="nav">
                <li class="nav__item nav__item--active" data-slide="0">
                    <span>1</span>
                    <svg width="100%" height="100%" viewBox="0 0 16 16">
                        <circle cx="8" cy="8" r="6.215"></circle>
                    </svg>
                </li>
                <li class="nav__item" data-slide="1">
                    <span>2</span>
                    <svg width="100%" height="100%" viewBox="0 0 16 16">
                        <circle cx="8" cy="8" r="6.215"></circle>
                    </svg>
                </li>
                <li class="nav__item" data-slide="2">
                    <span>3</span>
                    <svg width="100%" height="100%" viewBox="0 0 16 16">
                        <circle cx="8" cy="8" r="6.215"></circle>
                    </svg>
                </li>
                <li class="nav__item" data-slide="3">
                    <span>4</span>
                    <svg width="100%" height="100%" viewBox="0 0 16 16">
                        <circle cx="8" cy="8" r="6.215"></circle>
                    </svg>
                </li>
                <li class="nav__item" data-slide="4">
                    <span>5</span>
                    <svg width="100%" height="100%" viewBox="0 0 16 16">
                        <circle cx="8" cy="8" r="6.215"></circle>
                    </svg>
                </li>
            </ul>
        </div>

    </section>

    <!-- Events Section -->
    <section class="py-16 md:py-24 bg-background" id="events">
        <!-- Search & Filter System -->
        <div class="max-w-5xl mx-auto mb-12 md:mb-16 px-4 md:px-0">
            <!-- Search Bar -->
            <div class="relative mb-6 md:mb-8">
                <div class="absolute inset-y-0 left-0 pl-4 md:pl-6 flex items-center pointer-events-none">
                    <i class="fas fa-search text-gray-400 text-base md:text-lg"></i>
                </div>
                <input type="text" id="search-input" class="w-full pl-12 md:pl-14 pr-4 md:pr-6 py-4 md:py-5 bg-white/90 backdrop-blur-sm border border-gray-200/50 rounded-2xl text-base md:text-lg placeholder-gray-500 focus:outline-none focus:border-accent/50 focus:bg-white focus:shadow-xl focus:shadow-accent/10 transition-all duration-300" placeholder="Search events, venues, or locations...">
            </div>

            <!-- Filters -->
            <div class="bg-white/60 backdrop-blur-sm rounded-2xl p-4 md:p-6 border border-gray-200/50 shadow-lg">
                <div class="flex flex-col gap-4">
                    <div class="flex flex-col sm:flex-row gap-3">
                        <select id="category-filter" class="px-4 md:px-5 py-3 bg-white/80 border border-gray-200/50 rounded-xl text-primary focus:outline-none focus:border-accent/50 focus:bg-white focus:shadow-lg transition-all duration-300 flex-1">
                            <option value="">All Categories</option>
                        </select>
                        <select id="location-filter" class="px-4 md:px-5 py-3 bg-white/80 border border-gray-200/50 rounded-xl text-primary focus:outline-none focus:border-accent/50 focus:bg-white focus:shadow-lg transition-all duration-300 flex-1">
                            <option value="">All Locations</option>
                        </select>
                        <select id="sort-filter" class="px-4 md:px-5 py-3 bg-white/80 border border-gray-200/50 rounded-xl text-primary focus:outline-none focus:border-accent/50 focus:bg-white focus:shadow-lg transition-all duration-300 flex-1">
                            <option value="date">Sort by Date</option>
                            <option value="name">Sort by Name</option>
                            <option value="location">Sort by Location</option>
                        </select>
                    </div>
                    <div class="flex flex-col sm:flex-row gap-3">
                        <button id="date-order-toggle" class="px-4 md:px-6 py-3 bg-gradient-to-r from-accent to-accent/80 text-white rounded-xl font-medium hover:from-accent/90 hover:to-accent/70 hover:shadow-lg hover:shadow-accent/25 transition-all duration-300 flex items-center justify-center gap-2 flex-1 sm:flex-none">
                            <i class="fas fa-sort-amount-up"></i>
                            <span id="date-order-text">Earliest First</span>
                        </button>
                        <button id="clear-filters" class="px-4 md:px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-medium transition-all duration-300 flex items-center justify-center gap-2 flex-1 sm:flex-none">
                            <i class="fas fa-times"></i>
                            <span>Clear</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loading State -->
        <div id="loading" class="text-center py-20">
            <div class="inline-flex flex-col items-center">
                <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary mb-4"></div>
                <p class="text-gray-600 text-lg">Loading events...</p>
            </div>
        </div>

        <!-- Error State -->
        <div id="error" class="hidden bg-red-50 border-2 border-red-200 p-6 mb-8 max-w-7xl mx-auto">
            <div class="flex items-center">
                <i class="fas fa-exclamation-triangle text-red-500 text-xl mr-3"></i>
                <div>
                    <h3 class="text-red-800 font-bold uppercase tracking-wide">Error loading events</h3>
                    <p class="text-red-700 text-sm mt-1" id="error-message"></p>
                </div>
            </div>
        </div>

        <!-- Events Grid -->
        <div id="events-container" class="events-grid"></div>
        
        <!-- Load More Button -->
        <div id="load-more-container" class="text-center my-16 hidden">
            <button id="load-more-btn" class="px-10 py-5 bg-transparent border-2 border-accent text-accent text-base cursor-pointer transition-all duration-300 font-normal tracking-wide hover:bg-accent hover:text-white hover:-translate-y-0.5 hover:shadow-lg hover:shadow-accent/30">
                <span id="load-more-text">Load More Events</span>
                <i id="load-more-spinner" class="fas fa-spinner fa-spin ml-2 hidden"></i>
            </button>
        </div>

        <!-- Events Counter -->
        <div id="events-counter" class="text-center mt-6 text-gray-600">
            <p class="text-sm">
                Showing <span id="displayed-count" class="font-medium text-primary">0</span> 
                of <span id="total-count" class="font-medium text-primary">0</span> events
            </p>
        </div>
    </section>

            </div>
        </div>
    </main>

    <!-- Newsletter Section -->
    <section class="py-16 md:py-24 bg-background">
        <div class="text-center mb-12 md:mb-20 px-4 md:px-0">
            <h2 class="tit text-3xl md:text-4xl lg:text-5xl mb-4 md:mb-6 text-primary font-light tracking-tight">Stay Updated</h2>
            <p class="tit-no-underline text-base md:text-lg text-gray-600 max-w-3xl mx-auto leading-relaxed font-light">Get the latest news and updates about events happening across Iceland.</p>
        </div>
        
        <div class="max-w-2xl mx-auto px-4 md:px-10">
            <div class="flex flex-col sm:flex-row gap-3 mb-5">
                <input type="text" placeholder="Name" class="flex-1 px-4 md:px-5 py-3 md:py-4 border-2 border-primary/10 bg-surface text-base transition-all duration-300 text-primary font-light focus:outline-none focus:border-accent focus:bg-background">
                <input type="email" placeholder="Email" class="flex-1 px-4 md:px-5 py-3 md:py-4 border-2 border-primary/10 bg-surface text-base transition-all duration-300 text-primary font-light focus:outline-none focus:border-accent focus:bg-background">
            </div>
            <div class="text-center">
                <button class="px-8 md:px-10 py-3 md:py-4 bg-accent text-white border-none text-base cursor-pointer transition-all duration-300 font-normal tracking-wide hover:bg-accent/90 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-accent/30">
                    Subscribe
                </button>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gradient-to-br from-gray-800 to-gray-900 text-background py-12 md:py-20 relative overflow-hidden" id="contact">
        <!-- Subtle background pattern -->
        <div class="absolute inset-0 opacity-5">
            <div class="absolute top-0 left-0 w-full h-full" style="background-image: radial-gradient(circle at 25% 25%, #E55050 2px, transparent 2px), radial-gradient(circle at 75% 75%, #E55050 2px, transparent 2px); background-size: 60px 60px;"></div>
        </div>
        <div class="max-w-7xl mx-auto px-4 md:px-10 grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-16 relative z-10">
            <div>
                <h3 class="tit-no-underline text-sm mb-4 md:mb-5 font-medium text-background">Contact</h3>
                <p class="text-xs text-background/80 mb-2">Reykjavik, Iceland</p>
                <p class="text-xs text-background/80 mb-2">info@venuu.is</p>
                <p class="text-xs text-background/80 mb-2">+354 123 4567</p>
            </div>
            <div>
                <h3 class="tit-no-underline text-sm mb-4 md:mb-5 font-medium text-background">About</h3>
                <p class="text-xs text-background/80 mb-2">Venuu connects people through Iceland's vibrant cultural events.</p>
                <p class="text-xs text-background/80 mb-2">© 2024 Venuu. All rights reserved.</p>
            </div>
        </div>
        
        <!-- Footer Bottom -->
        <div class="border-t border-accent/20 mt-8 md:mt-10 pt-4 md:pt-5 relative z-10">
            <div class="max-w-7xl mx-auto px-4 md:px-10 flex flex-col sm:flex-row justify-between items-center gap-4 md:gap-5">
                <div class="flex flex-col sm:flex-row gap-4 md:gap-8 text-center sm:text-left">
                    <a href="#" class="text-background/70 no-underline text-xs transition-colors duration-200 hover:text-accent">Privacy Policy</a>
                    <a href="#" class="text-background/70 no-underline text-xs transition-colors duration-200 hover:text-accent">Terms of Service</a>
                    <a href="#" class="text-background/70 no-underline text-xs transition-colors duration-200 hover:text-accent">Support</a>
                </div>
                <div class="flex gap-4 md:gap-5">
                    <a href="#" class="text-background/70 no-underline text-sm transition-colors duration-200 hover:text-accent">Instagram</a>
                    <a href="#" class="text-background/70 no-underline text-sm transition-colors duration-200 hover:text-accent">Facebook</a>
                    <a href="#" class="text-background/70 no-underline text-sm transition-colors duration-200 hover:text-accent">Twitter</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Application State
        const App = {
            events: [],
            filteredEvents: [],
            currentPage: 0,
            eventsPerPage: 12,
            isLoading: false,
            searchTerm: '',
            filters: {
                category: '',
                location: '',
                sort: 'date'
            },
            dateOrder: 'asc', // 'asc' for earliest first, 'desc' for latest first
            availableImages: [
                'Images/068e9d4bef717cd1000843dc38c603ec.jpg',
                'Images/1d595e6dc1b6a3d963b932eb94de79d1.jpg',
                'Images/233986128f46951bf66a727cca1b3a18.jpg',
                'Images/24de6470d3365d85550c2c65ce8ddfca.jpg',
                'Images/3bd777f8c2760cbf585251808e738698.jpg',
                'Images/3f117cff666f231104f270edda727dab.jpg',
                'Images/53fe06b8e5fe6593f0f2a5de835609d2.jpg',
                'Images/542dfd6b879d676a823e611028e40984.jpg',
                'Images/783d478fde50b0f1d23ed5db8e9e2dee.jpg',
                'Images/90f82bfbdb111074fdfe5c1a6d813f5e.jpg',
                'Images/9303687a932a721b3a360633ade52260.jpg',
                'Images/96ec819f4ad7e5237c653c05baf5cd8c.jpg',
                'Images/b365df6222f9cce1e0ec0bf2ee881fb9.jpg',
                'Images/b3a1e66d241d956c3de527627d3c0a8a.jpg',
                'Images/d7ecf3fce251c523f3bb43ee6620e902.jpg',
                'Images/istockphoto-1478375497-612x612.jpg',
                'Images/istockphoto-494896581-612x612.jpg',
                'Images/pexels-jibarofoto-2774556.jpg',
                'Images/Poster.jpg'
            ]
        };

        // Utility Functions
        const Utils = {
            log: (message, data = null) => console.log(`[Iceland Events] ${message}`, data || ''),
            error: (message, error = null) => console.error(`[Iceland Events] ${message}`, error || ''),
            show: (id) => document.getElementById(id)?.classList.remove('hidden'),
            hide: (id) => document.getElementById(id)?.classList.add('hidden'),
            setText: (id, text) => {
                const el = document.getElementById(id);
                if (el) el.textContent = text;
            },
            formatDate: (dateString) => {
                const date = new Date(dateString);
                return date.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
            },
            getEventImage: (event, eventIndex = 0, allEvents = []) => {
                // Create a consistent hash from event ID to assign the same image to the same event
                const eventId = event.id || 0;
                let imageIndex = eventId % App.availableImages.length;
                
                // Check if this is for the carousel and we need to avoid adjacent duplicates
                if (allEvents.length > 0 && eventIndex >= 0) {
                    // Get the previous event's image
                    if (eventIndex > 0) {
                        const prevEvent = allEvents[eventIndex - 1];
                        const prevEventId = prevEvent.id || 0;
                        const prevImageIndex = prevEventId % App.availableImages.length;
                        
                        // If the current event would have the same image as the previous, shift it
                        if (imageIndex === prevImageIndex) {
                            imageIndex = (imageIndex + 1) % App.availableImages.length;
                        }
                    }
                }
                
                return App.availableImages[imageIndex];
            }
        };

        // Event Card Component
        const EventCard = {
            create: (event) => {
                const title = event.language?.is?.title || event.language?.en?.title || event.title || 'Untitled Event';
                const description = event.language?.is?.text || event.language?.en?.text || 'No description available';
                const location = event.formatted_address || event.city || 'Location TBD';
                const date = event.start ? Utils.formatDate(event.start) : 'Date TBD';
                // Use consistent image assignment based on event ID
                const imageUrl = Utils.getEventImage(event);
                const category = event.categories?.[0]?.name || 'Event';
                const tags = event.tags || [];

                const card = document.createElement('div');
                card.className = 'event-item';
                
                // Add click event handler
                card.addEventListener('click', () => {
                    showEventDetails(event);
                });
                
                card.innerHTML = `
                    <div class="event-img">
                        <img src="${imageUrl}" alt="${title}" 
                             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImciIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDY2Q0MiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiM3NjRiYTIiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2cpIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj7wn5GAPC90ZXh0Pjwvc3ZnPg=='"
                             onload="this.classList.add('loaded')">
                    </div>
                    <div class="event-caption">
                        <div class="event-title">${title}</div>
                        <div class="event-location">${location}</div>
                        <div class="event-date">${date}</div>
                    </div>
                `;
                
                return card;
            }
        };

        // Data Management
        const DataManager = {
            async loadEvents() {
                try {
                    Utils.log('Loading events...');
                    const response = await fetch('api-data.json');
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                    
                    const events = await response.json();
                    Utils.log(`Loaded ${events.length} events`);
                    
                    App.events = events;
                    App.filteredEvents = [...events];
                    
                    Utils.hide('loading');
                    Utils.setText('total-count', events.length);
                    Utils.show('events-counter');
                    
                    this.populateLocationFilter();
                    this.populateCategoryFilter();
                    this.displayEvents();
                    this.setupLoadMore();
                    
                } catch (error) {
                    Utils.error('Failed to load events', error);
                    Utils.hide('loading');
                    Utils.show('error');
                    Utils.setText('error-message', error.message);
                }
            },

            populateLocationFilter() {
                // Get unique postal codes from events
                const postalCodes = [...new Set(App.events
                    .map(event => event.postal)
                    .filter(postal => postal && postal.trim() !== '')
                )].sort((a, b) => parseInt(a) - parseInt(b));

                Utils.log(`Found ${postalCodes.length} unique postal codes with events`);

                // Postal code to city mapping
                const postalToCity = {
                    '101': 'Reykjavík miðborg', '102': 'Reykjavík miðborg', '103': 'Reykjavík miðborg', '104': 'Reykjavík miðborg', '105': 'Reykjavík miðborg',
                    '107': 'Reykjavík miðborg', '108': 'Reykjavík miðborg', '109': 'Reykjavík miðborg', '110': 'Reykjavík', '111': 'Reykjavík',
                    '112': 'Reykjavík', '113': 'Reykjavík', '116': 'Kjalarnes', '121': 'Reykjavík', '123': 'Reykjavík', '124': 'Reykjavík',
                    '125': 'Reykjavík', '127': 'Reykjavík', '128': 'Reykjavík', '129': 'Reykjavík', '130': 'Reykjavík', '132': 'Reykjavík',
                    '150': 'Reykjavík', '155': 'Reykjavík', '170': 'Seltjarnarnes', '172': 'Seltjarnarnes', '190': 'Vogar',
                    '200': 'Kópavogur', '201': 'Kópavogur', '202': 'Kópavogur', '203': 'Kópavogur', '210': 'Garðabær', '212': 'Garðabær',
                    '220': 'Hafnarfjörður', '221': 'Hafnarfjörður', '222': 'Hafnarfjörður', '225': 'Garðabær', '230': 'Reykjanesbær',
                    '232': 'Reykjanesbær', '233': 'Reykjanesbær', '235': 'Keflavík', '240': 'Grindavík', '245': 'Sandgerði',
                    '250': 'Garður', '260': 'Reykjanesbær', '270': 'Mosfellsbær', '271': 'Mosfellsbær', '276': 'Mosfellsbær',
                    '300': 'Akranes', '301': 'Akranes', '310': 'Borgarnes', '311': 'Borgarnes', '320': 'Reykholt í Borgarfirði',
                    '340': 'Stykkishólmur', '345': 'Flatey á Breiðafirði', '350': 'Grundarfjörður', '355': 'Ólafsvík', '356': 'Snæfellsbær',
                    '360': 'Hellissandur', '370': 'Búðardalur', '371': 'Búðardalur', '380': 'Reykhólar', '400': 'Ísafjörður',
                    '401': 'Ísafjörður', '410': 'Hnífsdalur', '415': 'Bolungarvík', '420': 'Súðavík', '425': 'Flateyri',
                    '430': 'Suðureyri', '450': 'Patreksfjörður', '451': 'Patreksfjörður', '460': 'Tálknafjörður', '465': 'Bíldudalur',
                    '470': 'Þingeyri', '471': 'Þingeyri', '500': 'Staður', '510': 'Hólmavík', '512': 'Hólmavík', '520': 'Drangsnes',
                    '524': 'Árneshreppur', '530': 'Hvammstangi', '531': 'Hvammstangi', '540': 'Blönduós', '541': 'Blönduós',
                    '545': 'Skagaströnd', '550': 'Sauðárkrókur', '551': 'Sauðárkrókur', '560': 'Varmahlíð', '565': 'Hofsós',
                    '566': 'Hofsós', '570': 'Fljót', '580': 'Siglufjörður', '600': 'Akureyri', '601': 'Akureyri', '602': 'Akureyri',
                    '603': 'Akureyri', '610': 'Grenivík', '611': 'Grímsey', '620': 'Dalvík', '621': 'Dalvík', '625': 'Ólafsfjörður',
                    '630': 'Hrísey', '640': 'Húsavík', '641': 'Húsavík', '645': 'Fosshóll', '650': 'Laugar', '660': 'Mývatn',
                    '670': 'Kópasker', '671': 'Kópasker', '675': 'Raufarhöfn', '680': 'Þórshöfn', '681': 'Þórshöfn', '685': 'Bakkafjörður',
                    '690': 'Vopnafjörður', '700': 'Egilsstaðir', '701': 'Egilsstaðir', '710': 'Seyðisfjörður', '715': 'Mjóifjörður',
                    '720': 'Borgarfjörður eystri', '730': 'Reyðarfjörður', '735': 'Eskifjörður', '740': 'Neskaupstaður',
                    '750': 'Fáskrúðsfjörður', '755': 'Stöðvarfjörður', '760': 'Breiðdalsvík', '765': 'Djúpivogur',
                    '780': 'Höfn í Hornafirði', '781': 'Höfn í Hornafirði', '785': 'Öræfi', '800': 'Selfoss', '801': 'Selfoss',
                    '802': 'Selfoss', '810': 'Hveragerði', '815': 'Þorlákshöfn', '820': 'Eyrarbakki', '825': 'Stokkseyri',
                    '840': 'Laugarvatn', '845': 'Flúðir', '850': 'Hellu', '860': 'Hvolsvöllur', '861': 'Hvolsvöllur',
                    '870': 'Vík', '871': 'Vík', '880': 'Kirkjubæjarklaustur', '900': 'Vestmannaeyjar', '902': 'Vestmannaeyjar'
                };

                // Update the location filter dropdown
                const locationFilter = document.getElementById('location-filter');
                if (locationFilter) {
                    // Clear existing options except the first one
                    locationFilter.innerHTML = '<option value="">Allar staðsetningar</option>';
                    
                    // Add only postal codes that have events
                    postalCodes.forEach(postalCode => {
                        const city = postalToCity[postalCode] || 'Unknown';
                        const option = document.createElement('option');
                        option.value = postalCode;
                        option.textContent = `${postalCode} - ${city}`;
                        locationFilter.appendChild(option);
                    });
                }
            },

            populateCategoryFilter() {
                // Get unique categories from events
                const categories = [...new Set(App.events
                    .map(event => event.categories?.[0]?.name)
                    .filter(category => category && category.trim() !== '')
                )].sort();

                Utils.log(`Found ${categories.length} unique categories with events`);

                // Update the category filter dropdown
                const categoryFilter = document.getElementById('category-filter');
                if (categoryFilter) {
                    // Clear existing options except the first one
                    categoryFilter.innerHTML = '<option value="">Allar flokkar</option>';
                    
                    // Add only categories that have events
                    categories.forEach(category => {
                        const option = document.createElement('option');
                        option.value = category;
                        option.textContent = category;
                        categoryFilter.appendChild(option);
                    });
                }
            },

            displayEvents() {
                const container = document.getElementById('events-container');
                const startIndex = App.currentPage * App.eventsPerPage;
                const endIndex = Math.min(startIndex + App.eventsPerPage, App.filteredEvents.length);
                const eventsToShow = App.filteredEvents.slice(startIndex, endIndex);
                
                eventsToShow.forEach((event, index) => {
                    const card = EventCard.create(event);
                    container.appendChild(card);
                });
                
                App.currentPage++;
                Utils.setText('displayed-count', Math.min(App.currentPage * App.eventsPerPage, App.filteredEvents.length));
                
                if (App.currentPage * App.eventsPerPage >= App.filteredEvents.length) {
                    Utils.hide('load-more-container');
                }
            },

            setupLoadMore() {
                if (App.filteredEvents.length > App.eventsPerPage) {
                    Utils.show('load-more-container');
                    const button = document.getElementById('load-more-btn');
                    button.onclick = this.loadMore.bind(this);
                }
            },

            async loadMore() {
                if (App.isLoading) return;
                
                App.isLoading = true;
                const button = document.getElementById('load-more-btn');
                const text = document.getElementById('load-more-text');
                const spinner = document.getElementById('load-more-spinner');
                
                text.textContent = 'Loading...';
                spinner.classList.remove('hidden');
                button.disabled = true;
                
                await new Promise(resolve => setTimeout(resolve, 500));
                
                this.displayEvents();
                
                text.textContent = 'Load More Events';
                spinner.classList.add('hidden');
                button.disabled = false;
                App.isLoading = false;
            },

            filterEvents() {
                App.filteredEvents = App.events.filter(event => {
                    const title = (event.language?.is?.title || event.language?.en?.title || event.title || '').toLowerCase();
                    const description = (event.language?.is?.text || event.language?.en?.text || '').toLowerCase();
                    const location = (event.formatted_address || event.city || '').toLowerCase();
                    const category = (event.categories?.[0]?.name || '').toLowerCase();
                    const postalCode = event.postal || '';
                    
                    const matchesSearch = !App.searchTerm || 
                        title.includes(App.searchTerm) || 
                        description.includes(App.searchTerm) || 
                        location.includes(App.searchTerm);
                    
                    const matchesCategory = !App.filters.category || category.includes(App.filters.category.toLowerCase());
                    const matchesLocation = !App.filters.location || postalCode === App.filters.location;
                    
                    return matchesSearch && matchesCategory && matchesLocation;
                });
                
                this.sortEvents();
                this.resetAndDisplay();
            },

            sortEvents() {
                App.filteredEvents.sort((a, b) => {
                    switch (App.filters.sort) {
                        case 'name':
                            const nameA = (a.language?.is?.title || a.language?.en?.title || a.title || '').toLowerCase();
                            const nameB = (b.language?.is?.title || b.language?.en?.title || b.title || '').toLowerCase();
                            return nameA.localeCompare(nameB);
                        case 'location':
                            const locA = (a.formatted_address || a.city || '').toLowerCase();
                            const locB = (b.formatted_address || b.city || '').toLowerCase();
                            return locA.localeCompare(locB);
                        case 'date':
                        default:
                            const dateA = new Date(a.start || 0);
                            const dateB = new Date(b.start || 0);
                            return App.dateOrder === 'asc' ? dateA - dateB : dateB - dateA;
                    }
                });
            },

            resetAndDisplay() {
                App.currentPage = 0;
                document.getElementById('events-container').innerHTML = '';
                Utils.setText('total-count', App.filteredEvents.length);
                this.displayEvents();
                this.setupLoadMore();
            }
        };

        // Search Bar Manager
        const SearchBarManager = {
            init() {
                const searchInput = document.getElementById('searchInput');
                const searchBtn = document.getElementById('searchBtn');
                const searchDropdown = document.getElementById('searchDropdown');
                
                if (!searchInput || !searchDropdown) return;
                
                let searchTimeout;
                
                // Handle input events
                searchInput.addEventListener('input', (e) => {
                    const query = e.target.value.trim();
                    
                    // Clear previous timeout
                    if (searchTimeout) {
                        clearTimeout(searchTimeout);
                    }
                    
                    if (query.length >= 2) {
                        // Debounce search
                        searchTimeout = setTimeout(() => {
                            this.showSuggestions(query);
                        }, 300);
                    } else {
                        this.hideDropdown();
                    }
                });
                
                // Handle search button click
                searchBtn.addEventListener('click', () => {
                    const query = searchInput.value.trim();
                    if (query) {
                        this.performSearch(query);
                    }
                });
                
                // Handle Enter key
                searchInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        const query = searchInput.value.trim();
                        if (query) {
                            this.performSearch(query);
                        }
                    } else if (e.key === 'Escape') {
                        this.hideDropdown();
                        searchInput.blur();
                    }
                });
                
                // Handle focus
                searchInput.addEventListener('focus', () => {
                    const query = searchInput.value.trim();
                    if (query.length >= 2) {
                        this.showSuggestions(query);
                    }
                });
                
                // Hide dropdown when clicking outside
                document.addEventListener('click', (e) => {
                    if (!searchInput.contains(e.target) && !searchDropdown.contains(e.target)) {
                        this.hideDropdown();
                    }
                });
            },
            
            showSuggestions(query) {
                if (!App.events || App.events.length === 0) return;
                
                const suggestions = this.getSuggestions(query);
                this.displaySuggestions(suggestions);
            },
            
            getSuggestions(query) {
                const lowerQuery = query.toLowerCase();
                const suggestions = [];
                
                // Search through events
                App.events.forEach(event => {
                    const title = (event.language?.is?.title || event.language?.en?.title || event.title || '').toLowerCase();
                    const description = (event.language?.is?.text || event.language?.en?.text || '').toLowerCase();
                    const location = (event.formatted_address || event.city || '').toLowerCase();
                    const category = (event.categories?.[0]?.name || '').toLowerCase();
                    
                    // Check if query matches any field
                    if (title.includes(lowerQuery) || description.includes(lowerQuery) || 
                        location.includes(lowerQuery) || category.includes(lowerQuery)) {
                        
                        const eventTitle = event.language?.is?.title || event.language?.en?.title || event.title || 'Untitled Event';
                        const eventLocation = event.formatted_address || event.city || 'Location TBD';
                        const eventDate = event.start ? Utils.formatDate(event.start) : 'Date TBD';
                        
                        suggestions.push({
                            type: 'event',
                            title: eventTitle,
                            location: eventLocation,
                            date: eventDate,
                            event: event
                        });
                    }
                });
                
                // Get unique locations
                const locations = [...new Set(App.events
                    .map(event => event.formatted_address || event.city)
                    .filter(loc => loc && loc.toLowerCase().includes(lowerQuery))
                )].slice(0, 3);
                
                locations.forEach(location => {
                    suggestions.push({
                        type: 'location',
                        title: location,
                        subtitle: 'Location'
                    });
                });
                
                // Get unique categories
                const categories = [...new Set(App.events
                    .map(event => event.categories?.[0]?.name)
                    .filter(cat => cat && cat.toLowerCase().includes(lowerQuery))
                )].slice(0, 3);
                
                categories.forEach(category => {
                    suggestions.push({
                        type: 'category',
                        title: category,
                        subtitle: 'Category'
                    });
                });
                
                return suggestions.slice(0, 8); // Limit to 8 suggestions
            },
            
            displaySuggestions(suggestions) {
                const dropdown = document.getElementById('searchDropdown');
                
                if (suggestions.length === 0) {
                    dropdown.innerHTML = '<div class="no-results">No results found</div>';
                } else {
                    dropdown.innerHTML = suggestions.map(suggestion => {
                        if (suggestion.type === 'event') {
                            return `
                                <div class="search-suggestion" data-event-id="${suggestion.event.id}">
                                    <div class="suggestion-title">${suggestion.title}</div>
                                    <div class="suggestion-details">${suggestion.location} • ${suggestion.date}</div>
                                </div>
                            `;
                        } else {
                            return `
                                <div class="search-suggestion" data-type="${suggestion.type}" data-value="${suggestion.title}">
                                    <div class="suggestion-title">${suggestion.title}</div>
                                    <div class="suggestion-details">${suggestion.subtitle}</div>
                                </div>
                            `;
                        }
                    }).join('');
                    
                    // Add click handlers to suggestions
                    dropdown.querySelectorAll('.search-suggestion').forEach(item => {
                        item.addEventListener('click', () => {
                            if (item.dataset.eventId) {
                                // Handle event click
                                const event = App.events.find(e => e.id == item.dataset.eventId);
                                if (event) {
                                    this.performSearch(event.language?.is?.title || event.language?.en?.title || event.title);
                                }
                            } else {
                                // Handle location/category click
                                this.performSearch(item.dataset.value);
                            }
                        });
                    });
                }
                
                dropdown.classList.add('show');
            },
            
            hideDropdown() {
                const dropdown = document.getElementById('searchDropdown');
                dropdown.classList.remove('show');
            },
            
            performSearch(query) {
                // Update the main search input in the events section
                const mainSearchInput = document.getElementById('search-input');
                if (mainSearchInput) {
                    mainSearchInput.value = query;
                    App.searchTerm = query.toLowerCase();
                    DataManager.filterEvents();
                }
                
                // Hide dropdown
                this.hideDropdown();
                
                // Scroll to events section
                const eventsSection = document.getElementById('events');
                if (eventsSection) {
                    const headerHeight = document.querySelector('nav').offsetHeight;
                    const targetPosition = eventsSection.offsetTop - headerHeight - 20;
                    
                    gsap.to(window, {
                        duration: 1.2,
                        scrollTo: { y: targetPosition, autoKill: false },
                        ease: "power2.inOut"
                    });
                }
            }
        };

        // Search and Filter Handlers
        const SearchManager = {
            init() {
                const searchInput = document.getElementById('search-input');
                const categoryFilter = document.getElementById('category-filter');
                const locationFilter = document.getElementById('location-filter');
                const sortFilter = document.getElementById('sort-filter');
                const dateOrderToggle = document.getElementById('date-order-toggle');
                const dateOrderText = document.getElementById('date-order-text');
                const dateOrderIcon = dateOrderToggle.querySelector('i');
                const clearFiltersBtn = document.getElementById('clear-filters');
                
                searchInput.addEventListener('input', (e) => {
                    App.searchTerm = e.target.value.toLowerCase();
                    DataManager.filterEvents();
                });
                
                categoryFilter.addEventListener('change', (e) => {
                    App.filters.category = e.target.value;
                    DataManager.filterEvents();
                });
                
                locationFilter.addEventListener('change', (e) => {
                    App.filters.location = e.target.value;
                    DataManager.filterEvents();
                });
                
                sortFilter.addEventListener('change', (e) => {
                    App.filters.sort = e.target.value;
                    DataManager.filterEvents();
                });

                dateOrderToggle.addEventListener('click', () => {
                    // Toggle between ascending and descending
                    App.dateOrder = App.dateOrder === 'asc' ? 'desc' : 'asc';
                    
                    // Update button text and icon
                    if (App.dateOrder === 'asc') {
                        dateOrderText.textContent = 'Earliest First';
                        dateOrderIcon.className = 'fas fa-sort-amount-up';
                    } else {
                        dateOrderText.textContent = 'Latest First';
                        dateOrderIcon.className = 'fas fa-sort-amount-down';
                    }
                    
                    // Only re-sort if currently sorting by date
                    if (App.filters.sort === 'date') {
                        DataManager.filterEvents();
                    }
                });

                clearFiltersBtn.addEventListener('click', () => {
                    // Clear search input
                    searchInput.value = '';
                    App.searchTerm = '';
                    
                    // Reset all filters to default values
                    categoryFilter.value = '';
                    locationFilter.value = '';
                    sortFilter.value = 'date';
                    
                    App.filters.category = '';
                    App.filters.location = '';
                    App.filters.sort = 'date';
                    
                    // Reset date order to default
                    App.dateOrder = 'asc';
                    dateOrderText.textContent = 'Earliest First';
                    dateOrderIcon.className = 'fas fa-sort-amount-up';
                    
                    // Re-filter events
                    DataManager.filterEvents();
                });
            }
        };

        // Animated Carousel Manager
        const CarouselManager = {
            timer: 4000,
            i: 0,
            max: 12,
            
            init() {
                // Initialize first items based on screen size
                this.showItems(0);
                
                // Start the carousel
                setInterval(() => {
                    this.cycleItems();
                }, this.timer);
                
                // Handle window resize
                window.addEventListener('resize', () => {
                    this.showItems(this.i);
                });
            },
            
            getItemsPerView() {
                // Return number of items to show based on screen size
                return window.innerWidth < 768 ? 2 : 4;
            },
            
            showItems(startIndex) {
                const items = document.querySelectorAll('#c > li');
                const itemsPerView = this.getItemsPerView();
                const itemWidth = 100 / itemsPerView;
                
                // Remove active class from all items
                items.forEach(item => item.classList.remove('active'));
                
                // Show items starting from startIndex
                for (let j = 0; j < itemsPerView; j++) {
                    const index = (startIndex + j) % this.max;
                    const item = items[index];
                    if (item) {
                        item.classList.add('active');
                        item.style.left = `${j * itemWidth}%`;
                    }
                }
            },
            
            cycleItems() {
                const items = document.querySelectorAll('#c > li');
                const itemsPerView = this.getItemsPerView();
                
                // Remove active class from all items
                items.forEach(item => item.classList.remove('active'));
                
                // Move to next set of items
                this.i = (this.i + itemsPerView) % this.max;
                
                // Show new items with staggered delays
                for (let j = 0; j < itemsPerView; j++) {
                    const index = (this.i + j) % this.max;
                    const item = items[index];
                    if (item) {
                        const itemWidth = 100 / itemsPerView;
                        item.style.left = `${j * itemWidth}%`;
                        setTimeout(() => {
                            item.classList.add('active');
                        }, j * 250); // Staggered appearance
                    }
                }
            }
        };


        // Category Carousel Manager (Base class for all category carousels)
        const CategoryCarouselManager = {
            createManager(category, filterFunction, title) {
                return {
                    currentIndex: 0,
                    itemsPerView: 3,
                    totalItems: 0,
                    carouselTrack: null,
                    carouselContainer: null,
                    isDragging: false,
                    startX: 0,
                    currentX: 0,
                    initialTranslateX: 0,
                    category: category,
                    filterFunction: filterFunction,
                    title: title,
                    
                    init() {
                        this.carouselTrack = document.getElementById(`${category}Carousel`);
                        this.carouselContainer = document.getElementById(`${category}CarouselContainer`);
                        const prevBtn = document.getElementById(`${category}PrevBtn`);
                        const nextBtn = document.getElementById(`${category}NextBtn`);
                        
                        if (!this.carouselTrack || !this.carouselContainer || !prevBtn || !nextBtn) return;
                        
                        // Wait for events to be loaded
                        if (App.events && App.events.length > 0) {
                            this.populateCarousel();
                            this.setupNavigation();
                            this.setupDrag();
                        } else {
                            // Wait for events to load
                            const checkEvents = setInterval(() => {
                                if (App.events && App.events.length > 0) {
                                    this.populateCarousel();
                                    this.setupNavigation();
                                    this.setupDrag();
                                    clearInterval(checkEvents);
                                }
                            }, 100);
                        }
                    },
                    
                    populateCarousel() {
                        // Filter events based on category
                        const categoryEvents = App.events.filter(this.filterFunction).slice(0, 8);
                        this.totalItems = categoryEvents.length;
                        
                        // Hide the entire carousel section if no events found
                        const carouselSection = this.carouselContainer.closest('section');
                        if (this.totalItems === 0) {
                            if (carouselSection) {
                                carouselSection.style.display = 'none';
                            }
                            return;
                        } else {
                            if (carouselSection) {
                                carouselSection.style.display = 'block';
                            }
                        }
                        
                        this.carouselTrack.innerHTML = categoryEvents.map((event, index) => {
                            const title = event.language?.is?.title || event.language?.en?.title || event.title || 'Untitled Event';
                            const location = event.formatted_address || event.city || 'Location TBD';
                            const date = event.start ? Utils.formatDate(event.start) : 'Date TBD';
                            const imageUrl = Utils.getEventImage(event, index, categoryEvents);
                            
                            return `
                                <div class="recommended-event-card" data-event-id="${event.id}">
                                    <div class="recommended-event-image">
                                        <img src="${imageUrl}" alt="${title}" 
                                             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImciIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDY2Q0MiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiM3NjRiYTIiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2cpIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj7wn5GAPC90ZXh0Pjwvc3ZnPg=='"
                                             onload="this.classList.add('loaded')">
                                    </div>
                                    <div class="recommended-event-content">
                                        <div class="recommended-event-title">${title}</div>
                                        <div class="recommended-event-location">${location}</div>
                                        <div class="recommended-event-date">${date}</div>
                                    </div>
                                </div>
                            `;
                        }).join('');
                    },
                    
                    setupNavigation() {
                        const prevBtn = document.getElementById(`${this.category}PrevBtn`);
                        const nextBtn = document.getElementById(`${this.category}NextBtn`);
                        
                        prevBtn.addEventListener('click', () => this.previous());
                        nextBtn.addEventListener('click', () => this.next());
                        
                        // Update navigation state
                        this.updateNavigation();
                    },
                    
                    next() {
                        if (this.currentIndex < this.totalItems - this.itemsPerView) {
                            this.currentIndex++;
                            this.updateCarousel();
                        }
                    },
                    
                    previous() {
                        if (this.currentIndex > 0) {
                            this.currentIndex--;
                            this.updateCarousel();
                        }
                    },
                    
                    updateCarousel() {
                        const cardWidth = 320 + 24; // card width + gap
                        const translateX = -this.currentIndex * cardWidth;
                        this.carouselTrack.style.transform = `translateX(${translateX}px)`;
                        this.updateNavigation();
                    },
                    
                    setupDrag() {
                        // Mouse events
                        this.carouselContainer.addEventListener('mousedown', this.startDrag.bind(this));
                        this.carouselContainer.addEventListener('mousemove', this.drag.bind(this));
                        this.carouselContainer.addEventListener('mouseup', this.endDrag.bind(this));
                        this.carouselContainer.addEventListener('mouseleave', this.endDrag.bind(this));
                        
                        // Touch events
                        this.carouselContainer.addEventListener('touchstart', this.startDrag.bind(this));
                        this.carouselContainer.addEventListener('touchmove', this.drag.bind(this));
                        this.carouselContainer.addEventListener('touchend', this.endDrag.bind(this));
                        
                        // Prevent default drag behavior
                        this.carouselContainer.addEventListener('dragstart', (e) => e.preventDefault());
                    },
                    
                    startDrag(e) {
                        this.isDragging = true;
                        this.carouselContainer.classList.add('dragging');
                        
                        // Prevent default touch behavior
                        if (e.type === 'touchstart') {
                            e.preventDefault();
                        }
                        
                        const clientX = e.type === 'touchstart' ? e.touches[0].clientX : e.clientX;
                        this.startX = clientX;
                        this.currentX = clientX;
                        
                        // Get current translateX value
                        const transform = this.carouselTrack.style.transform;
                        const match = transform.match(/translateX\(([^)]+)px\)/);
                        this.initialTranslateX = match ? parseFloat(match[1]) : 0;
                    },
                    
                    drag(e) {
                        if (!this.isDragging) return;
                        
                        // Always prevent default to stop scrolling
                        e.preventDefault();
                        e.stopPropagation();
                        
                        const clientX = e.type === 'touchmove' ? e.touches[0].clientX : e.clientX;
                        this.currentX = clientX;
                        
                        const deltaX = this.currentX - this.startX;
                        const newTranslateX = this.initialTranslateX + deltaX;
                        
                        this.carouselTrack.style.transform = `translateX(${newTranslateX}px)`;
                    },
                    
                    endDrag(e) {
                        if (!this.isDragging) return;
                        
                        this.isDragging = false;
                        this.carouselContainer.classList.remove('dragging');
                        
                        // Get final position for touch events
                        if (e.type === 'touchend' && e.changedTouches && e.changedTouches[0]) {
                            this.currentX = e.changedTouches[0].clientX;
                        }
                        
                        const deltaX = this.currentX - this.startX;
                        const cardWidth = 320 + 24; // card width + gap
                        const threshold = cardWidth / 8; // Even more sensitive - 1/8 of card width
                        
                        // Only update if we have enough drag distance
                        if (Math.abs(deltaX) > threshold) {
                            if (deltaX > 0 && this.currentIndex > 0) {
                                // Dragging right - go to previous
                                this.currentIndex--;
                                this.updateCarousel();
                            } else if (deltaX < 0 && this.currentIndex < this.totalItems - this.itemsPerView) {
                                // Dragging left - go to next
                                this.currentIndex++;
                                this.updateCarousel();
                            } else {
                                // At boundary, snap back
                                this.updateCarousel();
                            }
                        } else {
                            // Not enough drag distance, snap back
                            this.updateCarousel();
                        }
                    },
                    
                    updateNavigation() {
                        const prevBtn = document.getElementById(`${this.category}PrevBtn`);
                        const nextBtn = document.getElementById(`${this.category}NextBtn`);
                        
                        if (prevBtn) {
                            prevBtn.style.opacity = this.currentIndex > 0 ? '1' : '0.5';
                            prevBtn.disabled = this.currentIndex <= 0;
                        }
                        
                        if (nextBtn) {
                            nextBtn.style.opacity = this.currentIndex < this.totalItems - this.itemsPerView ? '1' : '0.5';
                            nextBtn.disabled = this.currentIndex >= this.totalItems - this.itemsPerView;
                        }
                    }
                };
            }
        };

        // Recommended Events Carousel Manager
        const RecommendedCarouselManager = {
            currentIndex: 0,
            itemsPerView: 3,
            totalItems: 0,
            carouselTrack: null,
            carouselContainer: null,
            isDragging: false,
            startX: 0,
            currentX: 0,
            initialTranslateX: 0,
            
            init() {
                this.carouselTrack = document.getElementById('recommendedCarousel');
                this.carouselContainer = document.getElementById('carouselContainer');
                const prevBtn = document.getElementById('prevBtn');
                const nextBtn = document.getElementById('nextBtn');
                
                if (!this.carouselTrack || !this.carouselContainer || !prevBtn || !nextBtn) return;
                
                // Wait for events to be loaded
                if (App.events && App.events.length > 0) {
                    this.populateCarousel();
                    this.setupNavigation();
                    this.setupDrag();
                } else {
                    // Wait for events to load
                    const checkEvents = setInterval(() => {
                        if (App.events && App.events.length > 0) {
                            this.populateCarousel();
                            this.setupNavigation();
                            this.setupDrag();
                            clearInterval(checkEvents);
                        }
                    }, 100);
                }
            },
            
            populateCarousel() {
                // Get recommended events (first 8 events for now)
                const recommendedEvents = App.events.slice(0, 8);
                this.totalItems = recommendedEvents.length;
                
                // Hide the entire carousel section if no events found
                const carouselSection = this.carouselContainer.closest('section');
                if (this.totalItems === 0) {
                    if (carouselSection) {
                        carouselSection.style.display = 'none';
                    }
                    return;
                } else {
                    if (carouselSection) {
                        carouselSection.style.display = 'block';
                    }
                }
                
                this.carouselTrack.innerHTML = recommendedEvents.map((event, index) => {
                    const title = event.language?.is?.title || event.language?.en?.title || event.title || 'Untitled Event';
                    const location = event.formatted_address || event.city || 'Location TBD';
                    const date = event.start ? Utils.formatDate(event.start) : 'Date TBD';
                    const imageUrl = Utils.getEventImage(event, index, recommendedEvents);
                    
                    return `
                        <div class="recommended-event-card" data-event-id="${event.id}">
                            <div class="recommended-event-image">
                                <img src="${imageUrl}" alt="${title}" 
                                     onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImciIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMwMDY2Q0MiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiM3NjRiYTIiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2cpIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj7wn5GAPC90ZXh0Pjwvc3ZnPg=='"
                                     onload="this.classList.add('loaded')">
                            </div>
                            <div class="recommended-event-content">
                                <div class="recommended-event-title">${title}</div>
                                <div class="recommended-event-location">${location}</div>
                                <div class="recommended-event-date">${date}</div>
                            </div>
                        </div>
                    `;
                }).join('');
                
            },
            
            setupNavigation() {
                const prevBtn = document.getElementById('prevBtn');
                const nextBtn = document.getElementById('nextBtn');
                
                prevBtn.addEventListener('click', () => this.previous());
                nextBtn.addEventListener('click', () => this.next());
                
                // Update navigation state
                this.updateNavigation();
            },
            
            next() {
                if (this.currentIndex < this.totalItems - this.itemsPerView) {
                    this.currentIndex++;
                    this.updateCarousel();
                }
            },
            
            previous() {
                if (this.currentIndex > 0) {
                    this.currentIndex--;
                    this.updateCarousel();
                }
            },
            
            updateCarousel() {
                const cardWidth = 320 + 24; // card width + gap
                const translateX = -this.currentIndex * cardWidth;
                this.carouselTrack.style.transform = `translateX(${translateX}px)`;
                this.updateNavigation();
            },
            
            setupDrag() {
                // Mouse events
                this.carouselContainer.addEventListener('mousedown', this.startDrag.bind(this));
                this.carouselContainer.addEventListener('mousemove', this.drag.bind(this));
                this.carouselContainer.addEventListener('mouseup', this.endDrag.bind(this));
                this.carouselContainer.addEventListener('mouseleave', this.endDrag.bind(this));
                
                // Touch events
                this.carouselContainer.addEventListener('touchstart', this.startDrag.bind(this));
                this.carouselContainer.addEventListener('touchmove', this.drag.bind(this));
                this.carouselContainer.addEventListener('touchend', this.endDrag.bind(this));
                
                // Prevent default drag behavior
                this.carouselContainer.addEventListener('dragstart', (e) => e.preventDefault());
            },
            
            startDrag(e) {
                this.isDragging = true;
                this.carouselContainer.classList.add('dragging');
                
                // Prevent default touch behavior
                if (e.type === 'touchstart') {
                    e.preventDefault();
                }
                
                const clientX = e.type === 'touchstart' ? e.touches[0].clientX : e.clientX;
                this.startX = clientX;
                this.currentX = clientX;
                
                // Get current translateX value
                const transform = this.carouselTrack.style.transform;
                const match = transform.match(/translateX\(([^)]+)px\)/);
                this.initialTranslateX = match ? parseFloat(match[1]) : 0;
            },
            
            drag(e) {
                if (!this.isDragging) return;
                
                // Always prevent default to stop scrolling
                e.preventDefault();
                e.stopPropagation();
                
                const clientX = e.type === 'touchmove' ? e.touches[0].clientX : e.clientX;
                this.currentX = clientX;
                
                const deltaX = this.currentX - this.startX;
                const newTranslateX = this.initialTranslateX + deltaX;
                
                this.carouselTrack.style.transform = `translateX(${newTranslateX}px)`;
            },
            
            endDrag(e) {
                if (!this.isDragging) return;
                
                this.isDragging = false;
                this.carouselContainer.classList.remove('dragging');
                
                // Get final position for touch events
                if (e.type === 'touchend' && e.changedTouches && e.changedTouches[0]) {
                    this.currentX = e.changedTouches[0].clientX;
                }
                
                const deltaX = this.currentX - this.startX;
                const cardWidth = 320 + 24; // card width + gap
                const threshold = cardWidth / 8; // Even more sensitive - 1/8 of card width
                
                // Only update if we have enough drag distance
                if (Math.abs(deltaX) > threshold) {
                    if (deltaX > 0 && this.currentIndex > 0) {
                        // Dragging right - go to previous
                        this.currentIndex--;
                        this.updateCarousel();
                    } else if (deltaX < 0 && this.currentIndex < this.totalItems - this.itemsPerView) {
                        // Dragging left - go to next
                        this.currentIndex++;
                        this.updateCarousel();
                    } else {
                        // At boundary, snap back
                        this.updateCarousel();
                    }
                } else {
                    // Not enough drag distance, snap back
                    this.updateCarousel();
                }
            },
            
            updateNavigation() {
                const prevBtn = document.getElementById('prevBtn');
                const nextBtn = document.getElementById('nextBtn');
                
                if (prevBtn) {
                    prevBtn.style.opacity = this.currentIndex > 0 ? '1' : '0.5';
                    prevBtn.disabled = this.currentIndex <= 0;
                }
                
                if (nextBtn) {
                    nextBtn.style.opacity = this.currentIndex < this.totalItems - this.itemsPerView ? '1' : '0.5';
                    nextBtn.disabled = this.currentIndex >= this.totalItems - this.itemsPerView;
                }
            },
            
        };

        // Mobile Menu Manager
        const MobileMenuManager = {
            init() {
                const mobileMenuBtn = document.getElementById('mobile-menu-btn');
                const mobileMenu = document.getElementById('mobile-menu');
                
                if (mobileMenuBtn && mobileMenu) {
                    mobileMenuBtn.addEventListener('click', () => {
                        mobileMenu.classList.toggle('hidden');
                        
                        // Toggle icon between hamburger and X
                        const icon = mobileMenuBtn.querySelector('i');
                        if (mobileMenu.classList.contains('hidden')) {
                            icon.className = 'fas fa-bars text-xl';
                        } else {
                            icon.className = 'fas fa-times text-xl';
                        }
                    });
                    
                    // Close mobile menu when clicking on a link
                    mobileMenu.querySelectorAll('a').forEach(link => {
                        link.addEventListener('click', () => {
                            mobileMenu.classList.add('hidden');
                            const icon = mobileMenuBtn.querySelector('i');
                            icon.className = 'fas fa-bars text-xl';
                        });
                    });
                }
            }
        };

        // Initialize Application
        const init = () => {
            Utils.log('Initializing Iceland Events App');
            DataManager.loadEvents();
            SearchManager.init();
            SearchBarManager.init();
            RecommendedCarouselManager.init();
            
            // Initialize category carousels
            const FamilyCarouselManager = CategoryCarouselManager.createManager('family', 
                (event) => {
                    const title = (event.language?.is?.title || event.language?.en?.title || event.title || '').toLowerCase();
                    const description = (event.language?.is?.text || event.language?.en?.text || '').toLowerCase();
                    return title.includes('family') || title.includes('children') || title.includes('kids') || 
                           description.includes('family') || description.includes('children') || description.includes('kids');
                }, 'Family Events');
            
            const FreeCarouselManager = CategoryCarouselManager.createManager('free',
                (event) => {
                    const title = (event.language?.is?.title || event.language?.en?.title || event.title || '').toLowerCase();
                    const description = (event.language?.is?.text || event.language?.en?.text || '').toLowerCase();
                    return title.includes('free') || title.includes('gratis') || 
                           description.includes('free') || description.includes('gratis') ||
                           (event.price && event.price === 0);
                }, 'Free Events');
            
            const MusicCarouselManager = CategoryCarouselManager.createManager('music',
                (event) => {
                    const title = (event.language?.is?.title || event.language?.en?.title || event.title || '').toLowerCase();
                    const description = (event.language?.is?.text || event.language?.en?.text || '').toLowerCase();
                    const category = (event.categories?.[0]?.name || '').toLowerCase();
                    return title.includes('music') || title.includes('concert') || title.includes('band') || 
                           description.includes('music') || description.includes('concert') || description.includes('band') ||
                           category.includes('music') || category.includes('concert');
                }, 'Music Events');
            
            const ArtCarouselManager = CategoryCarouselManager.createManager('art',
                (event) => {
                    const title = (event.language?.is?.title || event.language?.en?.title || event.title || '').toLowerCase();
                    const description = (event.language?.is?.text || event.language?.en?.text || '').toLowerCase();
                    const category = (event.categories?.[0]?.name || '').toLowerCase();
                    return title.includes('art') || title.includes('exhibition') || title.includes('gallery') || 
                           description.includes('art') || description.includes('exhibition') || description.includes('gallery') ||
                           category.includes('art') || category.includes('culture') || category.includes('exhibition');
                }, 'Art & Culture');
            
            const FoodCarouselManager = CategoryCarouselManager.createManager('food',
                (event) => {
                    const title = (event.language?.is?.title || event.language?.en?.title || event.title || '').toLowerCase();
                    const description = (event.language?.is?.text || event.language?.en?.text || '').toLowerCase();
                    const category = (event.categories?.[0]?.name || '').toLowerCase();
                    return title.includes('food') || title.includes('drink') || title.includes('wine') || title.includes('beer') || 
                           title.includes('tasting') || title.includes('culinary') || title.includes('restaurant') ||
                           description.includes('food') || description.includes('drink') || description.includes('wine') || 
                           description.includes('beer') || description.includes('tasting') || description.includes('culinary') ||
                           category.includes('food') || category.includes('drink') || category.includes('culinary');
                }, 'Food & Drink');
            
            const SportsCarouselManager = CategoryCarouselManager.createManager('sports',
                (event) => {
                    const title = (event.language?.is?.title || event.language?.en?.title || event.title || '').toLowerCase();
                    const description = (event.language?.is?.text || event.language?.en?.text || '').toLowerCase();
                    const category = (event.categories?.[0]?.name || '').toLowerCase();
                    return title.includes('sport') || title.includes('fitness') || title.includes('run') || title.includes('marathon') || 
                           title.includes('football') || title.includes('soccer') || title.includes('basketball') || title.includes('tennis') ||
                           description.includes('sport') || description.includes('fitness') || description.includes('run') || 
                           description.includes('marathon') || description.includes('football') || description.includes('soccer') ||
                           category.includes('sport') || category.includes('fitness') || category.includes('athletic');
                }, 'Sports & Fitness');
            
            const OutdoorCarouselManager = CategoryCarouselManager.createManager('outdoor',
                (event) => {
                    const title = (event.language?.is?.title || event.language?.en?.title || event.title || '').toLowerCase();
                    const description = (event.language?.is?.text || event.language?.en?.text || '').toLowerCase();
                    const category = (event.categories?.[0]?.name || '').toLowerCase();
                    return title.includes('outdoor') || title.includes('hiking') || title.includes('nature') || title.includes('adventure') || 
                           title.includes('camping') || title.includes('trail') || title.includes('mountain') || title.includes('forest') ||
                           description.includes('outdoor') || description.includes('hiking') || description.includes('nature') || 
                           description.includes('adventure') || description.includes('camping') || description.includes('trail') ||
                           category.includes('outdoor') || category.includes('nature') || category.includes('adventure');
                }, 'Outdoor Events');
            
            const EducationCarouselManager = CategoryCarouselManager.createManager('education',
                (event) => {
                    const title = (event.language?.is?.title || event.language?.en?.title || event.title || '').toLowerCase();
                    const description = (event.language?.is?.text || event.language?.en?.text || '').toLowerCase();
                    const category = (event.categories?.[0]?.name || '').toLowerCase();
                    return title.includes('workshop') || title.includes('seminar') || title.includes('class') || title.includes('course') || 
                           title.includes('learning') || title.includes('education') || title.includes('training') || title.includes('lecture') ||
                           description.includes('workshop') || description.includes('seminar') || description.includes('class') || 
                           description.includes('course') || description.includes('learning') || description.includes('education') ||
                           category.includes('education') || category.includes('workshop') || category.includes('learning');
                }, 'Educational');
            
            const BusinessCarouselManager = CategoryCarouselManager.createManager('business',
                (event) => {
                    const title = (event.language?.is?.title || event.language?.en?.title || event.title || '').toLowerCase();
                    const description = (event.language?.is?.text || event.language?.en?.text || '').toLowerCase();
                    const category = (event.categories?.[0]?.name || '').toLowerCase();
                    return title.includes('business') || title.includes('networking') || title.includes('conference') || title.includes('meetup') || 
                           title.includes('professional') || title.includes('career') || title.includes('startup') || title.includes('entrepreneur') ||
                           description.includes('business') || description.includes('networking') || description.includes('conference') || 
                           description.includes('meetup') || description.includes('professional') || description.includes('career') ||
                           category.includes('business') || category.includes('networking') || category.includes('professional');
                }, 'Business & Networking');
            
            // Initialize all carousels
            FamilyCarouselManager.init();
            FreeCarouselManager.init();
            MusicCarouselManager.init();
            ArtCarouselManager.init();
            FoodCarouselManager.init();
            SportsCarouselManager.init();
            OutdoorCarouselManager.init();
            EducationCarouselManager.init();
            BusinessCarouselManager.init();
            
            CarouselManager.init();
            MobileMenuManager.init();
        };

        // Start the app
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }

        // Animated Header JavaScript
        gsap.registerPlugin(DrawSVGPlugin, ScrollToPlugin);

        function initDrawRandomUnderline() {
            const svgVariants = [
                `<svg width="310" height="40" viewBox="0 0 310 40" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 20.9999C26.7762 16.2245 49.5532 11.5572 71.7979 14.6666C84.9553 16.5057 97.0392 21.8432 109.987 24.3888C116.413 25.6523 123.012 25.5143 129.042 22.6388C135.981 19.3303 142.586 15.1422 150.092 13.3333C156.799 11.7168 161.702 14.6225 167.887 16.8333C181.562 21.7212 194.975 22.6234 209.252 21.3888C224.678 20.0548 239.912 17.991 255.42 18.3055C272.027 18.6422 288.409 18.867 305 17.9999" stroke="currentColor" stroke-width="10" stroke-linecap="round"/></svg>`,
                `<svg width="310" height="40" viewBox="0 0 310 40" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 24.2592C26.233 20.2879 47.7083 16.9968 69.135 13.8421C98.0469 9.5853 128.407 4.02322 158.059 5.14674C172.583 5.69708 187.686 8.66104 201.598 11.9696C207.232 13.3093 215.437 14.9471 220.137 18.3619C224.401 21.4596 220.737 25.6575 217.184 27.6168C208.309 32.5097 197.199 34.281 186.698 34.8486C183.159 35.0399 147.197 36.2657 155.105 26.5837C158.11 22.9053 162.993 20.6229 167.764 18.7924C178.386 14.7164 190.115 12.1115 201.624 10.3984C218.367 7.90626 235.528 7.06127 252.521 7.49276C258.455 7.64343 264.389 7.92791 270.295 8.41825C280.321 9.25056 296 10.8932 305 13.0242" stroke="#E55050" stroke-width="10" stroke-linecap="round"/></svg>`,
                `<svg width="310" height="40" viewBox="0 0 310 40" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 29.5014C9.61174 24.4515 12.9521 17.9873 20.9532 17.5292C23.7742 17.3676 27.0987 17.7897 29.6575 19.0014C33.2644 20.7093 35.6481 24.0004 39.4178 25.5014C48.3911 29.0744 55.7503 25.7731 63.3048 21.0292C67.9902 18.0869 73.7668 16.1366 79.3721 17.8903C85.1682 19.7036 88.2173 26.2464 94.4121 27.2514C102.584 28.5771 107.023 25.5064 113.276 20.6125C119.927 15.4067 128.83 12.3333 137.249 15.0014C141.418 16.3225 143.116 18.7528 146.581 21.0014C149.621 22.9736 152.78 23.6197 156.284 24.2514C165.142 25.8479 172.315 17.5185 179.144 13.5014C184.459 10.3746 191.785 8.74853 195.868 14.5292C199.252 19.3205 205.597 22.9057 211.621 22.5014C215.553 22.2374 220.183 17.8356 222.979 15.5569C225.4 13.5845 227.457 11.1105 230.742 10.5292C232.718 10.1794 234.784 12.9691 236.164 14.0014C238.543 15.7801 240.717 18.4775 243.356 19.8903C249.488 23.1729 255.706 21.2551 261.079 18.0014C266.571 14.6754 270.439 11.5202 277.146 13.6125C280.725 14.7289 283.221 17.209 286.393 19.0014C292.321 22.3517 298.255 22.5014 305 22.5014" stroke="#E55050" stroke-width="10" stroke-linecap="round"/></svg>`,
                `<svg width="310" height="40" viewBox="0 0 310 40" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.0039 32.6826C32.2307 32.8412 47.4552 32.8277 62.676 32.8118C67.3044 32.807 96.546 33.0555 104.728 32.0775C113.615 31.0152 104.516 28.3028 102.022 27.2826C89.9573 22.3465 77.3751 19.0254 65.0451 15.0552C57.8987 12.7542 37.2813 8.49399 44.2314 6.10216C50.9667 3.78422 64.2873 5.81914 70.4249 5.96641C105.866 6.81677 141.306 7.58809 176.75 8.59886C217.874 9.77162 258.906 11.0553 300 14.4892" stroke="#E55050" stroke-width="10" stroke-linecap="round"/></svg>`,
                `<svg width="310" height="40" viewBox="0 0 310 40" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.99805 20.9998C65.6267 17.4649 126.268 13.845 187.208 12.8887C226.483 12.2723 265.751 13.2796 304.998 13.9998" stroke="currentColor" stroke-width="10" stroke-linecap="round"/></svg>`,
                `<svg width="310" height="40" viewBox="0 0 310 40" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 29.8857C52.3147 26.9322 99.4329 21.6611 146.503 17.1765C151.753 16.6763 157.115 15.9505 162.415 15.6551C163.28 15.6069 165.074 15.4123 164.383 16.4275C161.704 20.3627 157.134 23.7551 153.95 27.4983C153.209 28.3702 148.194 33.4751 150.669 34.6605C153.638 36.0819 163.621 32.6063 165.039 32.2029C178.55 28.3608 191.49 23.5968 204.869 19.5404C231.903 11.3436 259.347 5.83254 288.793 5.12258C294.094 4.99476 299.722 4.82265 305 5.45025" stroke="#E55050" stroke-width="10" stroke-linecap="round"/></svg>`
            ];
            
            // Add attributes to <svg> elements
            function decorateSVG(svgEl) {
                svgEl.setAttribute('class', 'text-draw__box-svg');
                svgEl.setAttribute('preserveAspectRatio', 'none');
                svgEl.querySelectorAll('path').forEach(path => {
                    path.setAttribute('stroke', 'currentColor');
                });
            }
            
            let nextIndex = null;
            document.querySelectorAll('[data-draw-line]').forEach(container => {
                const box = container.querySelector('[data-draw-line-box]');
                if (!box) return;
                let enterTween = null;
                let leaveTween = null;
                
                container.addEventListener('mouseenter', () => {
                    // Don't restart if still playing
                    if (enterTween && enterTween.isActive()) return;
                    if (leaveTween && leaveTween.isActive()) leaveTween.kill();
                    
                    // Random Start
                    if (nextIndex === null) {
                        nextIndex = Math.floor(Math.random() * svgVariants.length);
                    }
                    
                    // Animate Draw
                    box.innerHTML = svgVariants[nextIndex];
                    const svg = box.querySelector('svg');
                    if (svg) {
                        decorateSVG(svg);
                        const path = svg.querySelector('path');
                        if (path) {
                            gsap.set(path, { drawSVG: '0%' });
                            enterTween = gsap.to(path, {
                                duration: 0.5,
                                drawSVG: '100%',
                                ease: 'power2.inOut',
                                onComplete: () => { enterTween = null; }
                            });
                        }
                    }
                    
                    // Advance for next hover across all items
                    nextIndex = (nextIndex + 1) % svgVariants.length;
                });
                
                container.addEventListener('mouseleave', () => {
                    const path = box.querySelector('path');
                    if (!path) return;
                    
                    const playOut = () => {
                        // Don't restart if still drawing out
                        if (leaveTween && leaveTween.isActive()) return;
                        leaveTween = gsap.to(path, {
                            duration: 0.5,
                            drawSVG: '100% 100%',
                            ease: 'power2.inOut',
                            onComplete: () => {
                                leaveTween = null;
                                box.innerHTML = ''; // remove SVG when done
                            }
                        });
                    };
                    
                    if (enterTween && enterTween.isActive()) {
                        // Wait until draw-in finishes
                        enterTween.eventCallback('onComplete', playOut);
                    } else {
                        playOut();
                    }
                });
            });
        }
        
        // Smooth Scroll Navigation
        function initSmoothScroll() {
            // Handle logo click to scroll to top
            const logoLink = document.getElementById('logo-link');
            if (logoLink) {
                logoLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    try {
                        // Try GSAP ScrollToPlugin first
                        gsap.to(window, {
                            duration: 0.6,
                            scrollTo: { y: 0 },
                            ease: "power2.out"
                        });
                    } catch (error) {
                        // Fallback to native smooth scroll
                        window.scrollTo({
                            top: 0,
                            behavior: 'smooth'
                        });
                    }
                });
            }

            // Handle navigation clicks
            document.querySelectorAll('.nav-menu a[href^="#"]').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    
                    if (targetElement) {
                        // Calculate offset for fixed header
                        const headerHeight = document.querySelector('nav').offsetHeight;
                        const targetPosition = targetElement.offsetTop - headerHeight - 20;
                        
                        // Use GSAP for smooth scroll animation
                        gsap.to(window, {
                            duration: 1.2,
                            scrollTo: { y: targetPosition, autoKill: false },
                            ease: "power2.inOut"
                        });
                    }
                });
            });
            
        }

        // Text Animation Functions
        function initTextAnimation() {
            // Split text into words and letters for elements with 'tit' class
            $('.tit').each(function(){
                var $t = $(this),
                    text = $t.text(),
                    word = text.split(' ');
                
                $t.text('');
                
                $.each(word, function(i, val){
                    $('<span class="splitted-word"></span>').appendTo($t);
                    letter = val.split('');
                    $.each(letter, function(j, v) {
                        $('<span class="splitted-letter">' + v +'</span>').appendTo($('.splitted-word:last'), $t);
                    });
                    $('<span class="splitted-letter">&nbsp;</span>').appendTo($('.splitted-word:last'), $t);
                });
            });

            // Split text into words and letters for elements with 'tit-no-underline' class
            $('.tit-no-underline').each(function(){
                var $t = $(this),
                    text = $t.text(),
                    word = text.split(' ');
                
                $t.text('');
                
                $.each(word, function(i, val){
                    $('<span class="splitted-word"></span>').appendTo($t);
                    letter = val.split('');
                    $.each(letter, function(j, v) {
                        $('<span class="splitted-letter">' + v +'</span>').appendTo($('.splitted-word:last'), $t);
                    });
                    $('<span class="splitted-letter">&nbsp;</span>').appendTo($('.splitted-word:last'), $t);
                });
            });

            // Animate text when it comes into view
            inView('.tit').on('enter', function(el) {
                if ($(el).is(':not(".to-view")')){
                    $(el).addClass('to-view');
                    var letters = $('.splitted-letter', $(el));
                    gsap.to(letters, {
                        duration: 0.6,
                        delay: 0.1,
                        y: 0,
                        ease: "power3.easeInOut",
                        stagger: 0.006,
                        onComplete: function() {
                            letters.addClass('viewed');
                        }
                    });
                }
            });

            // Animate text without underline when it comes into view
            inView('.tit-no-underline').on('enter', function(el) {
                if ($(el).is(':not(".to-view")')){
                    $(el).addClass('to-view');
                    var letters = $('.splitted-letter', $(el));
                    gsap.to(letters, {
                        duration: 0.6,
                        delay: 0.1,
                        y: 0,
                        ease: "power3.easeInOut",
                        stagger: 0.006
                    });
                }
            });
        }

        // Initialize Draw Random Underline
        document.addEventListener('DOMContentLoaded', function() {
            initDrawRandomUnderline();
            initSmoothScroll();
            initTextAnimation();
        });
    </script>
</body>
</html>